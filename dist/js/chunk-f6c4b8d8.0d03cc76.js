(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f6c4b8d8"],{a7ae:function(t,e,c){},b02c:function(t,e,c){"use strict";c("a7ae")},e6dc:function(t,e,c){"use strict";c.r(e);var a=c("7a23"),o=Object(a["L"])("data-v-23dfe32f");Object(a["v"])("data-v-23dfe32f");var n={class:"table products"},d=Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[Object(a["g"])("th",{scope:"col"},"圖片"),Object(a["g"])("th",{scope:"col"},"商品名稱"),Object(a["g"])("th",{scope:"col"},"價格"),Object(a["g"])("th",{scope:"col"})])],-1),l={scope:"row"},i=Object(a["g"])("br",null,null,-1),s={class:"fw-bold"},r={class:"text-end"},u={class:"btn-group",role:"group","aria-label":"Basic mixed styles example"},b={key:0,class:"spinner-border spinner-border-sm",role:"status"},p=Object(a["g"])("span",{class:"visually-hidden"},"Loading...",-1),g=Object(a["f"])(" 查看更多 "),O={key:0,class:"spinner-border spinner-border-sm",role:"status"},j=Object(a["g"])("span",{class:"visually-hidden"},"Loading...",-1),m=Object(a["f"])(" 加到購物車 ");Object(a["t"])();var h=o((function(t,e,c,o,h,f){var v=Object(a["z"])("pagination"),y=Object(a["z"])("userProductModal");return Object(a["s"])(),Object(a["d"])(a["a"],null,[Object(a["g"])("table",n,[d,Object(a["g"])("tbody",null,[(Object(a["s"])(!0),Object(a["d"])(a["a"],null,Object(a["y"])(h.products,(function(t){return Object(a["s"])(),Object(a["d"])("tr",{key:t.id},[Object(a["g"])("td",l,[Object(a["g"])("img",{src:t.imgUrl,alt:t.title,class:"cart-img"},null,8,["src","alt"])]),Object(a["g"])("td",null,Object(a["C"])(t.title),1),Object(a["g"])("td",null,[Object(a["g"])("del",null,"原價 "+Object(a["C"])(t.origin_price)+" 元",1),i,Object(a["g"])("span",s,"現在只要 "+Object(a["C"])(t.price)+" 元",1)]),Object(a["g"])("td",r,[Object(a["g"])("div",u,[Object(a["g"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(e){return f.getProductInfo(t)}},[h.loadingStatus.loadingItem===t.id?(Object(a["s"])(),Object(a["d"])("div",b,[p])):Object(a["e"])("",!0),g],8,["onClick"]),Object(a["g"])("button",{type:"button",class:"btn btn-outline-primary",onClick:function(e){return f.addCart(t.id,1,e)}},[h.loadingStatus.loadingCart===t.id?(Object(a["s"])(),Object(a["d"])("div",O,[j])):Object(a["e"])("",!0),m],8,["onClick"])])])])})),128))])]),Object(a["g"])(v,{pagination:h.pagination,onChangePage:f.getProduct},null,8,["pagination","onChangePage"]),Object(a["g"])(y,{"temp-product":h.tempProduct,ref:"userProductModal",onAddCart:f.addCart},null,8,["temp-product","onAddCart"])],64)})),f=c("5530"),v=(c("99af"),c("1799")),y=(c("a4d3"),c("e01a"),{class:"modal fade",id:"userProductModal",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true",ref:"modal"}),P={class:"modal-dialog modal-xl"},C={class:"modal-content"},k={class:"modal-header bg-dark text-white"},w={class:"modal-title",id:"exampleModalLabel"},M=Object(a["g"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),x={class:"modal-body"},$={class:"row row-cols-md-2"},S={class:"badge bg-primary rounded-pill"},_={key:0,class:"h5"},q={key:1,class:"h6"},I={key:2,class:"h5"},L={class:"input-group"};function U(t,e,c,o,n,d){return Object(a["s"])(),Object(a["d"])("div",y,[Object(a["g"])("div",P,[Object(a["g"])("div",C,[Object(a["g"])("div",k,[Object(a["g"])("h5",w,Object(a["C"])(t.tempProduct.title),1),M]),Object(a["g"])("div",x,[Object(a["g"])("div",$,[Object(a["g"])("img",{src:t.tempProduct.imgUrl,alt:"tempProduct.title",class:"modal-img"},null,8,["src"]),Object(a["g"])("div",null,[Object(a["g"])("span",S,Object(a["C"])(t.tempProduct.category),1),Object(a["g"])("p",null,"商品描述："+Object(a["C"])(t.tempProduct.description),1),Object(a["g"])("p",null,"商品內容："+Object(a["C"])(t.tempProduct.content),1),t.tempProduct.price?Object(a["e"])("",!0):(Object(a["s"])(),Object(a["d"])("div",_,Object(a["C"])(t.tempProduct.origin_price)+" 元",1)),t.tempProduct.price?(Object(a["s"])(),Object(a["d"])("del",q,"原價 "+Object(a["C"])(t.tempProduct.origin_price)+" 元",1)):Object(a["e"])("",!0),t.tempProduct.price?(Object(a["s"])(),Object(a["d"])("div",I,"現在只要 "+Object(a["C"])(t.tempProduct.price)+" 元",1)):Object(a["e"])("",!0),Object(a["g"])("div",null,[Object(a["g"])("div",L,[Object(a["J"])(Object(a["g"])("input",{type:"number",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=function(t){return n.qty=t}),min:"1"},null,512),[[a["G"],n.qty,void 0,{number:!0}]]),Object(a["g"])("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=function(e){return t.$emit("add-cart",t.tempProduct.id,n.qty,e)})},"加入購物車")])])])])])])])],512)}var J=c("7c2b"),z=c.n(J),A={props:["temp-product"],template:"#userProductModal",data:function(){return{modal:null,qty:1}},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new z.a(this.$refs.modal,{keyboard:!1})}};A.render=U;var B=A,N={data:function(){return{products:{},pagination:"",tempProduct:{},loadingStatus:{}}},components:{pagination:v["a"],userProductModal:B},methods:{getProduct:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="/api/".concat("hsinyuuu","/products?page=").concat(e);this.$http.get(c).then((function(e){e.data.success&&(t.products=e.data.products,t.pagination=e.data.pagination)})).catch((function(t){console.log(t)}))},getProductInfo:function(t){var e=this;this.tempProduct=Object(f["a"])({},t);var c=this.tempProduct.id,a="/api/".concat("hsinyuuu","/product/").concat(c);this.loadingStatus.loadingItem=c,this.$http.get(a).then((function(t){t.data.success?(e.loadingStatus.loadingItem="",e.$refs.userProductModal.openModal()):alert(t.data.message)})).catch((function(t){console.log(t)}))},addCart:function(t){var e=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,o="/api/".concat("hsinyuuu","/cart"),n={product_id:t,qty:c};if("changeQty"===a.target.dataset.action){var d=a.target.value-c;n={product_id:t,qty:d}}"BUTTON"===a.target.nodeName&&(this.loadingStatus.loadingCart=t),this.$refs.userProductModal.hideModal(),this.$http.post(o,{data:n}).then((function(t){t.data.success?e.loadingStatus.loadingCart="":alert(t.data.message)})).catch((function(t){console.log(t)}))}},mounted:function(){this.$http.defaults.baseURL="https://dev-vue-course-api.hexschool.io",this.getProduct()}};c("b02c");N.render=h,N.__scopeId="data-v-23dfe32f";e["default"]=N}}]);
//# sourceMappingURL=chunk-f6c4b8d8.0d03cc76.js.map