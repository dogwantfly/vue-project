{"version":3,"sources":["webpack:///./src/views/Products.vue?7410","webpack:///./src/views/Products.vue","webpack:///./src/components/UserProductModal.vue","webpack:///./src/components/UserProductModal.vue?503a","webpack:///./src/views/Products.vue?95da"],"names":["class","scope","role","aria-label","products","item","key","id","src","imgUrl","alt","title","origin_price","price","type","getProductInfo","loadingStatus","loadingItem","addCart","$event","loadingCart","pagination","getProduct","temp-product","tempProduct","ref","tabindex","aria-labelledby","aria-hidden","data-bs-dismiss","category","description","content","qty","min","$emit","props","template","data","modal","methods","openModal","this","show","hideModal","hide","mounted","$refs","keyboard","render","components","userProductModal","page","api","a","get","then","response","success","catch","error","console","log","alert","message","e","product_id","target","dataset","action","newQty","value","nodeName","post","defaults","baseURL","__scopeId"],"mappings":"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","file":"js/chunk-325ecce8.d5bdcb1e.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Products.vue?vue&type=style&index=0&id=a1c5661c&scoped=true&lang=css\"","<template>\n  <!-- 商品列表 -->\n  <table class=\"table products\">\n    <thead>\n      <tr>\n        <th scope=\"col\">圖片</th>\n        <th scope=\"col\">商品名稱</th>\n        <th scope=\"col\">價格</th>\n        <th scope=\"col\"></th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"(item) in products\" v-bind:key=\"item.id\">\n        <td scope=\"row\">\n          <img :src=\"item.imgUrl\" :alt=\"item.title\" class=\"cart-img\">\n        </td>\n        <td>{{item.title}}</td>\n        <td>\n          <del>原價 {{ item.origin_price }} 元</del>\n          <br>\n          <span class=\"fw-bold\">現在只要 {{item.price}} 元</span>\n        </td>\n        <td class=\"text-end\">\n          <div class=\"btn-group\" role=\"group\" aria-label=\"Basic mixed styles example\">\n            <button type=\"button\" class=\"btn btn-outline-secondary\" v-on:click=\"getProductInfo(item)\">\n              <div class=\"spinner-border spinner-border-sm\" role=\"status\" v-if=\"loadingStatus.loadingItem === item.id\">\n                <span class=\"visually-hidden\">Loading...</span>\n              </div>\n              查看更多\n            </button>\n            <button type=\"button\" class=\"btn btn-outline-primary\" v-on:click=\"addCart(item.id, 1, $event)\">\n              <div class=\"spinner-border spinner-border-sm\" role=\"status\" v-if=\"loadingStatus.loadingCart === item.id\">\n                <span class=\"visually-hidden\">Loading...</span>\n              </div>\n              加到購物車\n            </button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <!-- 分頁 -->\n  <pagination :pagination=\"pagination\" @change-page=\"getProduct\"></pagination>\n  <!-- userProductModal -->\n  <userProductModal :temp-product=\"tempProduct\" ref=\"userProductModal\" @add-cart=\"addCart\"></userProductModal>\n</template>\n<style scoped>\n.cart-img{\n  width: 200px;\n  height: 150px;\n  object-fit: cover;\n}\n.modal-img {\n  height: 500px;\n  object-fit: cover;\n}\n.table.products{\n  margin-top: 80px;\n}\n</style>\n<script>\nimport axios from 'axios'\nimport pagination from '@/components/Pagination.vue'\nimport userProductModal from '@/components/UserProductModal.vue'\nexport default ({\n  data () {\n    return {\n      products: {},\n      pagination: '',\n      tempProduct: {},\n      loadingStatus: {}\n    }\n  },\n  components: {\n    pagination,\n    userProductModal\n  },\n  methods: {\n    // 取得商品列表\n    getProduct (page = 1) {\n      const api = `/api/${process.env.VUE_APP_APIPATH}/products?page=${page}`\n      axios.get(api)\n        .then(response => {\n          if (!response.data.success) return\n          this.products = response.data.products\n          this.pagination = response.data.pagination\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    },\n    // 商品細節\n    getProductInfo (item) {\n      this.tempProduct = { ...item }\n      const id = this.tempProduct.id\n      const api = `/api/${process.env.VUE_APP_APIPATH}/product/${id}`\n      this.loadingStatus.loadingItem = id\n      axios.get(api)\n        .then(response => {\n          if (!response.data.success) {\n            alert(response.data.message)\n            return\n          }\n          this.loadingStatus.loadingItem = ''\n          this.$refs.userProductModal.openModal()\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    },\n    // 加入購物車\n    addCart (id, qty = 1, e) {\n      const api = `/api/${process.env.VUE_APP_APIPATH}/cart`\n      let data = {\n        product_id: id,\n        qty\n      }\n      if (e.target.dataset.action === 'changeQty') {\n        const newQty = e.target.value - qty\n        data = {\n          product_id: id,\n          qty: newQty\n        }\n      }\n      if (e.target.nodeName === 'BUTTON') {\n        this.loadingStatus.loadingCart = id\n      }\n      this.$refs.userProductModal.hideModal()\n      axios.post(api, { data })\n        .then(response => {\n          if (!response.data.success) {\n            alert(response.data.message)\n            return\n          }\n          // this.getCart();\n          this.loadingStatus.loadingCart = ''\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    }\n  },\n  mounted () {\n    axios.defaults.baseURL = process.env.VUE_APP_API\n    this.getProduct()\n  }\n})\n</script>\n","<template>\n  <div class=\"modal fade\" id=\"userProductModal\" tabindex=\"-1\" aria-labelledby=\"productModalLabel\" aria-hidden=\"true\" ref=\"modal\">\n    <div class=\"modal-dialog modal-xl\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header bg-dark text-white\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n            {{ tempProduct.title }}\n          </h5>\n          <button type=\"button\" class=\"btn-close btn-close-white\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n        <div class=\"row row-cols-md-2\">\n          <img :src=\"tempProduct.imgUrl\" alt=\"tempProduct.title\" class=\"modal-img\">\n          <div>\n            <span class=\"badge bg-primary rounded-pill\">{{ tempProduct.category }}</span>\n            <p>商品描述：{{ tempProduct.description }}</p>\n            <p>商品內容：{{ tempProduct.content }}</p>\n            <div class=\"h5\" v-if=\"!tempProduct.price\">{{ tempProduct.origin_price }} 元</div>\n            <del class=\"h6\" v-if=\"tempProduct.price\">原價 {{ tempProduct.origin_price }} 元</del>\n            <div class=\"h5\" v-if=\"tempProduct.price\">現在只要 {{ tempProduct.price }} 元</div>\n            <div>\n              <div class=\"input-group\">\n                <input type=\"number\" class=\"form-control\"\n                      v-model.number=\"qty\" min=\"1\">\n                <button type=\"button\" class=\"btn btn-primary\"\n                        @click=\"$emit('add-cart',tempProduct.id, qty, $event)\">加入購物車</button>\n              </div>\n            </div>\n          </div>\n        </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Modal from 'bootstrap/js/dist/modal'\nexport default {\n  props: ['temp-product'],\n  template: '#userProductModal',\n  data () {\n    return {\n      modal: null,\n      qty: 1\n    }\n  },\n  methods: {\n    openModal () {\n      this.modal.show()\n    },\n    hideModal () {\n      this.modal.hide()\n    }\n  },\n  mounted () {\n    // 建立 instance\n    this.modal = new Modal(this.$refs.modal, {\n      keyboard: false\n    })\n  }\n}\n</script>\n","import { render } from \"./UserProductModal.vue?vue&type=template&id=4a2d7d75\"\nimport script from \"./UserProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./UserProductModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Products.vue?vue&type=template&id=a1c5661c&scoped=true\"\nimport script from \"./Products.vue?vue&type=script&lang=js\"\nexport * from \"./Products.vue?vue&type=script&lang=js\"\n\nimport \"./Products.vue?vue&type=style&index=0&id=a1c5661c&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-a1c5661c\"\n\nexport default script"],"sourceRoot":""}