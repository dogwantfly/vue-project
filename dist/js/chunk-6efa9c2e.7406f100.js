(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6efa9c2e"],{"1dde":function(e,t,a){var c=a("d039"),n=a("b622"),o=a("2d00"),s=n("species");e.exports=function(e){return o>=51||!c((function(){var t=[],a=t.constructor={};return a[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"5e4b":function(e,t,a){},"65f0":function(e,t,a){var c=a("861d"),n=a("e8b5"),o=a("b622"),s=o("species");e.exports=function(e,t){var a;return n(e)&&(a=e.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?c(a)&&(a=a[s],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===t?0:t)}},8418:function(e,t,a){"use strict";var c=a("c04e"),n=a("9bf2"),o=a("5c6c");e.exports=function(e,t,a){var s=c(t);s in e?n.f(e,s,o(0,a)):e[s]=a}},"99af":function(e,t,a){"use strict";var c=a("23e7"),n=a("d039"),o=a("e8b5"),s=a("861d"),l=a("7b0b"),r=a("50c4"),i=a("8418"),u=a("65f0"),d=a("1dde"),b=a("b622"),g=a("2d00"),p=b("isConcatSpreadable"),m=9007199254740991,f="Maximum allowed index exceeded",O=g>=51||!n((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),j=d("concat"),v=function(e){if(!s(e))return!1;var t=e[p];return void 0!==t?!!t:o(e)},h=!O||!j;c({target:"Array",proto:!0,forced:h},{concat:function(e){var t,a,c,n,o,s=l(this),d=u(s,0),b=0;for(t=-1,c=arguments.length;t<c;t++)if(o=-1===t?s:arguments[t],v(o)){if(n=r(o.length),b+n>m)throw TypeError(f);for(a=0;a<n;a++,b++)a in o&&i(d,b,o[a])}else{if(b>=m)throw TypeError(f);i(d,b++,o)}return d.length=b,d}})},b0c0:function(e,t,a){var c=a("83ab"),n=a("9bf2").f,o=Function.prototype,s=o.toString,l=/^\s*function ([^ (]*)/,r="name";c&&!(r in o)&&n(o,r,{configurable:!0,get:function(){try{return s.call(this).match(l)[1]}catch(e){return""}}})},b789:function(e,t,a){"use strict";a.r(t);a("b0c0");var c=a("7a23"),n=Object(c["L"])("data-v-43b623b3");Object(c["v"])("data-v-43b623b3");var o={class:"row justify-content-center cart"},s={class:"col-8"},l={class:"table"},r=Object(c["g"])("thead",null,[Object(c["g"])("tr",null,[Object(c["g"])("th",{scope:"col"}),Object(c["g"])("th",{scope:"col"},"品名"),Object(c["g"])("th",{scope:"col"},"數量"),Object(c["g"])("th",{scope:"col"},"價錢")])],-1),i={key:0,class:"spinner-border spinner-border-sm",role:"status"},u=Object(c["g"])("span",{class:"visually-hidden"},"Loading...",-1),d=Object(c["f"])(" 移除購物車 "),b={key:0,class:"text-success"},g={class:"input-group input-group-sm"},p={class:"input-group-text"},m={key:0,class:"text-success"},f=Object(c["g"])("tr",null,[Object(c["g"])("td",{colspan:"3",class:"text-end border-0"},"運費"),Object(c["g"])("td",{class:"text-end border-0"},"0")],-1),O=Object(c["g"])("td",{colspan:"3",class:"text-end"},"合計",-1),j={class:"text-end"},v={class:"col-8"},h={class:"input-group mb-3 input-group-sm"},y={class:"input-group-append"},C={key:0,class:"spinner-border spinner-border-sm",role:"status"},x=Object(c["g"])("span",{class:"visually-hidden"},"Loading...",-1),V=Object(c["f"])(" 套用優惠碼 "),_={class:"row row-cols-2 justify-content-center"},k={class:"mb-3"},S=Object(c["g"])("label",{for:"email",class:"form-label"},[Object(c["f"])(" Email "),Object(c["g"])("span",{class:"text-danger"},"*")],-1),w={class:"mb-3"},q=Object(c["g"])("label",{for:"name",class:"form-label"},[Object(c["f"])(" 姓名 "),Object(c["g"])("span",{class:"text-danger"},"*")],-1),A={class:"mb-3"},U=Object(c["g"])("label",{for:"tel",class:"form-label"},[Object(c["f"])(" 電話 "),Object(c["g"])("span",{class:"text-danger"},"*")],-1),T={class:"mb-3"},M=Object(c["g"])("label",{for:"region",class:"form-label"},[Object(c["f"])(" 地區 "),Object(c["g"])("span",{class:"text-danger"},"*")],-1),P=Object(c["g"])("option",{value:""},"請選擇地區",-1),B=Object(c["g"])("option",{value:"台北市"},"台北市",-1),E=Object(c["g"])("option",{value:"高雄市"},"高雄市",-1),F={class:"mb-3"},G=Object(c["g"])("label",{for:"address",class:"form-label"},[Object(c["f"])(" 地址 "),Object(c["g"])("span",{class:"text-danger"},"*")],-1),J={class:"mb-3"},L=Object(c["g"])("label",{for:"payment",class:"form-label"},[Object(c["f"])(" 付款方式 "),Object(c["g"])("span",{class:"text-danger"},"*")],-1),R=Object(c["g"])("option",{value:"",hidden:""},"請選擇付款方式",-1),z=Object(c["g"])("option",{value:"WebATM"},"WebATM",-1),I=Object(c["g"])("option",{value:"ATM"},"ATM",-1),N=Object(c["g"])("option",{value:"Barcode"},"Barcode",-1),Q=Object(c["g"])("option",{value:"Credit"},"Credit",-1),W=Object(c["g"])("option",{value:"ApplePay"},"ApplePay",-1),$=Object(c["g"])("option",{value:"GooglePay"},"GooglePay",-1),D={class:"mb-3"},H=Object(c["g"])("label",{for:"message",class:"form-label"},"留言",-1),K=Object(c["g"])("span",{class:"invalid-feedback"},null,-1),X=Object(c["g"])("button",{class:"btn btn-primary",type:"submit"},"Submit",-1);Object(c["t"])();var Y=n((function(e,t,a,Y,Z,ee){var te=Object(c["z"])("Field"),ae=Object(c["z"])("error-message"),ce=Object(c["z"])("Form");return Object(c["s"])(),Object(c["d"])(c["a"],null,[Object(c["g"])("div",o,[Object(c["g"])("div",s,[Object(c["g"])("table",l,[r,Object(c["g"])("tbody",null,[(Object(c["s"])(!0),Object(c["d"])(c["a"],null,Object(c["y"])(Z.carts.carts,(function(e){return Object(c["s"])(),Object(c["d"])("tr",{key:e.id},[Object(c["g"])("td",null,[Object(c["g"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return ee.removeCartItem(e.id)}},[Z.loadingStatus.loadingRemoveCart===e.id?(Object(c["s"])(),Object(c["d"])("div",i,[u])):Object(c["e"])("",!0),d],8,["onClick"])]),Object(c["g"])("td",null,[Object(c["f"])(Object(c["C"])(e.product.title)+" ",1),e.coupon?(Object(c["s"])(),Object(c["d"])("div",b," 已套用優惠券 ")):Object(c["e"])("",!0)]),Object(c["g"])("td",null,[Object(c["g"])("div",g,[Object(c["g"])("input",{type:"number",class:"form-control",value:e.qty,min:"1","data-action":"changeQty",onChange:function(t){return ee.addCart(e.product_id,e.qty,t)}},null,40,["value","onChange"]),Object(c["g"])("div",p,"/ "+Object(c["C"])(e.product.unit),1)])]),Object(c["g"])("td",null,[Z.carts.final_total!==Z.carts.total?(Object(c["s"])(),Object(c["d"])("small",m,"折扣價：")):Object(c["e"])("",!0),Object(c["f"])(" "+Object(c["C"])(e.product.price*e.qty),1)])])})),128))]),Object(c["g"])("tfoot",null,[f,Object(c["g"])("tr",null,[O,Object(c["g"])("td",j,Object(c["C"])(Z.carts.final_total),1)])])])]),Object(c["g"])("div",v,[Object(c["g"])("div",h,[Object(c["J"])(Object(c["g"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return Z.coupon_code=e}),placeholder:"請輸入優惠碼"},null,512),[[c["G"],Z.coupon_code]]),Object(c["g"])("div",y,[Object(c["g"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[2]||(t[2]=function(){return ee.addCoupon&&ee.addCoupon.apply(ee,arguments)}),disabled:!Z.coupon_code},[Z.loadingStatus.loadingCoupon===Z.coupon_code&&""!==Z.coupon_code?(Object(c["s"])(),Object(c["d"])("div",C,[x])):Object(c["e"])("",!0),V],8,["disabled"])])])])]),Object(c["g"])("div",_,[Object(c["g"])(ce,{onSubmit:ee.addOrder},{default:n((function(e){var a=e.errors;return[Object(c["g"])("div",k,[S,Object(c["g"])(te,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":a["email"],"is-valid":!a["email"]&&""!==Z.user.email}],placeholder:"請輸入 Email",modelValue:Z.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Z.user.email=e}),rules:"email|required"},null,8,["modelValue","class"]),Object(c["g"])(ae,{name:"email",class:"invalid-feedback"})]),Object(c["g"])("div",w,[q,Object(c["g"])(te,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":a["姓名"],"is-valid":""!==Z.user.name&&!a["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:Z.user.name,"onUpdate:modelValue":t[4]||(t[4]=function(e){return Z.user.name=e})},null,8,["class","modelValue"]),Object(c["g"])(ae,{class:"invalid-feedback",name:"姓名"})]),Object(c["g"])("div",A,[U,Object(c["g"])(te,{id:"tel",name:"電話",type:"tel",modelValue:Z.user.tel,"onUpdate:modelValue":t[5]||(t[5]=function(e){return Z.user.tel=e}),class:["form-control",{"is-invalid":a["電話"],"is-valid":!a["電話"]&&""!==Z.user.tel}],placeholder:"請輸入電話",rules:"required|numeric|min:8"},null,8,["modelValue","class"]),Object(c["g"])(ae,{class:"invalid-feedback",name:"電話"})]),Object(c["g"])("div",T,[M,Object(c["g"])(te,{id:"region",name:"地區",class:["form-control",{"is-invalid":a["地區"],"is-valid":""!==Z.user.region&&!a["地區"]}],rules:"required",modelValue:Z.user.region,"onUpdate:modelValue":t[6]||(t[6]=function(e){return Z.user.region=e}),as:"select"},{default:n((function(){return[P,B,E]})),_:2},1032,["class","modelValue"]),Object(c["g"])(ae,{class:"invalid-feedback",name:"地區"})]),Object(c["g"])("div",F,[G,Object(c["g"])(te,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":a["地址"],"is-valid":""!==Z.user.address&&!a["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:Z.user.address,"onUpdate:modelValue":t[7]||(t[7]=function(e){return Z.user.address=e})},null,8,["class","modelValue"]),Object(c["g"])(ae,{class:"invalid-feedback",name:"地址"})]),Object(c["g"])("div",J,[L,Object(c["g"])(te,{id:"payment",name:"付款方式",class:["form-control",{"is-invalid":a["付款方式"],"is-valid":""!==Z.user.payment&&!a["付款方式"]}],rules:"required",modelValue:Z.user.payment,"onUpdate:modelValue":t[8]||(t[8]=function(e){return Z.user.payment=e}),as:"select"},{default:n((function(){return[R,z,I,N,Q,W,$]})),_:2},1032,["class","modelValue"]),Object(c["g"])(ae,{class:"invalid-feedback",name:"付款方式"})]),Object(c["g"])("div",D,[H,Object(c["J"])(Object(c["g"])("textarea",{name:"留言",class:"form-control",id:"message",placeholder:"請輸入留言",rows:"10","onUpdate:modelValue":t[9]||(t[9]=function(e){return Z.message=e})},null,512),[[c["G"],Z.message]]),K]),X]})),_:1},8,["onSubmit"])])],64)})),Z=(a("99af"),a("bc3a")),ee=a.n(Z),te={data:function(){return{user:{email:"",tel:"",name:"",region:"",address:"",payment:""},message:"",products:{},carts:{},change_cart_qty:0,pagination:"",tempProduct:{},loadingStatus:{},coupon_code:""}},methods:{addCart:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=arguments.length>2?arguments[2]:void 0,n="/api/".concat("hsinyuuu","/cart"),o={product_id:e,qty:a};if("changeQty"===c.target.dataset.action){var s=c.target.value-a;o={product_id:e,qty:s}}"BUTTON"===c.target.nodeName&&(this.loadingStatus.loadingCart=e),this.$refs.productModal.hideModal(),ee.a.post(n,{data:o}).then((function(e){e.data.success?(t.getCart(),t.loadingStatus.loadingCart=""):alert(e.data.message)})).catch((function(e){console.log(e)}))},getCart:function(){var e=this,t="/api/".concat("hsinyuuu","/cart");ee.a.get(t).then((function(t){t.data.success&&(e.carts=t.data.data)})).catch((function(e){console.log(e)}))},removeCartItem:function(e){var t=this,a="/api/".concat("hsinyuuu","/cart/").concat(e);this.loadingStatus.loadingRemoveCart=e,ee.a.delete(a).then((function(e){e.data.success&&(t.getCart(),t.loadingStatus.loadingRemoveCart="")})).catch((function(e){console.log(e)}))},addCoupon:function(){var e=this,t="/api/".concat("hsinyuuu","/coupon"),a={code:this.coupon_code};this.loadingStatus.loadingCoupon=this.coupon_code,ee.a.post(t,{data:a}).then((function(t){if(!t.data.success)return e.loadingStatus.loadingCoupon="",void alert(t.data.message);e.getCart(),e.loadingStatus.loadingCoupon=""})).catch((function(e){console.log(e)}))},addOrder:function(e,t){var a=this,c=t.resetForm,n="/api/".concat("hsinyuuu","/order"),o={user:this.user,message:this.message};this.carts.carts.length?ee.a.post(n,{data:o}).then((function(e){alert(e.data.message),e.data.success&&(a.user={email:"",tel:"",name:"",region:"",address:"",payment:""},a.message="",c())})).catch((function(e){console.log(e)})):alert("購物車無內容")}},mounted:function(){ee.a.defaults.baseURL="https://dev-vue-course-api.hexschool.io",this.getCart()}};a("d97d");te.render=Y,te.__scopeId="data-v-43b623b3";t["default"]=te},d97d:function(e,t,a){"use strict";a("5e4b")},e8b5:function(e,t,a){var c=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==c(e)}}}]);
//# sourceMappingURL=chunk-6efa9c2e.7406f100.js.map