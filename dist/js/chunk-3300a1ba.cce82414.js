(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3300a1ba"],{"1dde":function(e,t,a){var c=a("d039"),n=a("b622"),o=a("2d00"),s=n("species");e.exports=function(e){return o>=51||!c((function(){var t=[],a=t.constructor={};return a[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"65f0":function(e,t,a){var c=a("861d"),n=a("e8b5"),o=a("b622"),s=o("species");e.exports=function(e,t){var a;return n(e)&&(a=e.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?c(a)&&(a=a[s],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===t?0:t)}},8418:function(e,t,a){"use strict";var c=a("c04e"),n=a("9bf2"),o=a("5c6c");e.exports=function(e,t,a){var s=c(t);s in e?n.f(e,s,o(0,a)):e[s]=a}},"99af":function(e,t,a){"use strict";var c=a("23e7"),n=a("d039"),o=a("e8b5"),s=a("861d"),l=a("7b0b"),r=a("50c4"),i=a("8418"),u=a("65f0"),d=a("1dde"),b=a("b622"),g=a("2d00"),p=b("isConcatSpreadable"),m=9007199254740991,f="Maximum allowed index exceeded",O=g>=51||!n((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),j=d("concat"),v=function(e){if(!s(e))return!1;var t=e[p];return void 0!==t?!!t:o(e)},h=!O||!j;c({target:"Array",proto:!0,forced:h},{concat:function(e){var t,a,c,n,o,s=l(this),d=u(s,0),b=0;for(t=-1,c=arguments.length;t<c;t++)if(o=-1===t?s:arguments[t],v(o)){if(n=r(o.length),b+n>m)throw TypeError(f);for(a=0;a<n;a++,b++)a in o&&i(d,b,o[a])}else{if(b>=m)throw TypeError(f);i(d,b++,o)}return d.length=b,d}})},b0c0:function(e,t,a){var c=a("83ab"),n=a("9bf2").f,o=Function.prototype,s=o.toString,l=/^\s*function ([^ (]*)/,r="name";c&&!(r in o)&&n(o,r,{configurable:!0,get:function(){try{return s.call(this).match(l)[1]}catch(e){return""}}})},b789:function(e,t,a){"use strict";a.r(t);a("b0c0");var c=a("7a23"),n={class:"row justify-content-center"},o={class:"col-8"},s={class:"table"},l=Object(c["g"])("thead",null,[Object(c["g"])("tr",null,[Object(c["g"])("th",{scope:"col"}),Object(c["g"])("th",{scope:"col"},"品名"),Object(c["g"])("th",{scope:"col"},"數量"),Object(c["g"])("th",{scope:"col"},"價錢")])],-1),r={key:0,class:"spinner-border spinner-border-sm",role:"status"},i=Object(c["g"])("span",{class:"visually-hidden"},"Loading...",-1),u=Object(c["f"])(" 移除購物車 "),d={key:0,class:"text-success"},b={class:"input-group input-group-sm"},g={class:"input-group-text"},p={key:0,class:"text-success"},m=Object(c["g"])("tr",null,[Object(c["g"])("td",{colspan:"3",class:"text-end border-0"},"運費"),Object(c["g"])("td",{class:"text-end border-0"},"0")],-1),f=Object(c["g"])("td",{colspan:"3",class:"text-end"},"合計",-1),O={class:"text-end"},j={class:"col-8"},v={class:"input-group mb-3 input-group-sm"},h={class:"input-group-append"},y={key:0,class:"spinner-border spinner-border-sm",role:"status"},C=Object(c["g"])("span",{class:"visually-hidden"},"Loading...",-1),x=Object(c["f"])(" 套用優惠碼 "),V={class:"row row-cols-2 justify-content-center"},k={class:"mb-3"},_=Object(c["g"])("label",{for:"email",class:"form-label"},[Object(c["f"])(" Email "),Object(c["g"])("span",{class:"text-danger"},"*")],-1),S={class:"mb-3"},w=Object(c["g"])("label",{for:"name",class:"form-label"},[Object(c["f"])(" 姓名 "),Object(c["g"])("span",{class:"text-danger"},"*")],-1),q={class:"mb-3"},A=Object(c["g"])("label",{for:"tel",class:"form-label"},[Object(c["f"])(" 電話 "),Object(c["g"])("span",{class:"text-danger"},"*")],-1),U={class:"mb-3"},T=Object(c["g"])("label",{for:"region",class:"form-label"},[Object(c["f"])(" 地區 "),Object(c["g"])("span",{class:"text-danger"},"*")],-1),M=Object(c["g"])("option",{value:""},"請選擇地區",-1),J=Object(c["g"])("option",{value:"台北市"},"台北市",-1),P=Object(c["g"])("option",{value:"高雄市"},"高雄市",-1),B={class:"mb-3"},E=Object(c["g"])("label",{for:"address",class:"form-label"},[Object(c["f"])(" 地址 "),Object(c["g"])("span",{class:"text-danger"},"*")],-1),F={class:"mb-3"},G=Object(c["g"])("label",{for:"payment",class:"form-label"},[Object(c["f"])(" 付款方式 "),Object(c["g"])("span",{class:"text-danger"},"*")],-1),R=Object(c["g"])("option",{value:"",hidden:""},"請選擇付款方式",-1),z=Object(c["g"])("option",{value:"WebATM"},"WebATM",-1),L=Object(c["g"])("option",{value:"ATM"},"ATM",-1),I=Object(c["g"])("option",{value:"Barcode"},"Barcode",-1),K=Object(c["g"])("option",{value:"Credit"},"Credit",-1),N=Object(c["g"])("option",{value:"ApplePay"},"ApplePay",-1),Q=Object(c["g"])("option",{value:"GooglePay"},"GooglePay",-1),W={class:"mb-3"},$=Object(c["g"])("label",{for:"message",class:"form-label"},"留言",-1),D=Object(c["g"])("span",{class:"invalid-feedback"},null,-1),H=Object(c["g"])("button",{class:"btn btn-primary",type:"submit"},"Submit",-1);function X(e,t,a,X,Y,Z){var ee=this,te=Object(c["z"])("Field"),ae=Object(c["z"])("error-message"),ce=Object(c["z"])("Form");return Object(c["s"])(),Object(c["d"])(c["a"],null,[Object(c["g"])("div",n,[Object(c["g"])("div",o,[Object(c["g"])("table",s,[l,Object(c["g"])("tbody",null,[(Object(c["s"])(!0),Object(c["d"])(c["a"],null,Object(c["y"])(Y.carts.carts,(function(e){return Object(c["s"])(),Object(c["d"])("tr",{key:e.id},[Object(c["g"])("td",null,[Object(c["g"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return Z.removeCartItem(e.id)}},[Y.loadingStatus.loadingRemoveCart===e.id?(Object(c["s"])(),Object(c["d"])("div",r,[i])):Object(c["e"])("",!0),u],8,["onClick"])]),Object(c["g"])("td",null,[Object(c["f"])(Object(c["C"])(e.product.title)+" ",1),e.coupon?(Object(c["s"])(),Object(c["d"])("div",d," 已套用優惠券 ")):Object(c["e"])("",!0)]),Object(c["g"])("td",null,[Object(c["g"])("div",b,[Object(c["g"])("input",{type:"number",class:"form-control",value:e.qty,min:"1","data-action":"changeQty",onChange:function(t){return Z.addCart(e.product_id,e.qty,t)}},null,40,["value","onChange"]),Object(c["g"])("div",g,"/ "+Object(c["C"])(e.product.unit),1)])]),Object(c["g"])("td",null,[Y.carts.final_total!==Y.carts.total?(Object(c["s"])(),Object(c["d"])("small",p,"折扣價：")):Object(c["e"])("",!0),Object(c["f"])(" "+Object(c["C"])(e.product.price*e.qty),1)])])})),128))]),Object(c["g"])("tfoot",null,[m,Object(c["g"])("tr",null,[f,Object(c["g"])("td",O,Object(c["C"])(Y.carts.final_total),1)])])])]),Object(c["g"])("div",j,[Object(c["g"])("div",v,[Object(c["K"])(Object(c["g"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return Y.coupon_code=e}),placeholder:"請輸入優惠碼"},null,512),[[c["G"],Y.coupon_code]]),Object(c["g"])("div",h,[Object(c["g"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[2]||(t[2]=function(){return Z.addCoupon&&Z.addCoupon.apply(Z,arguments)}),disabled:!Y.coupon_code},[Y.loadingStatus.loadingCoupon===Y.coupon_code&&""!==Y.coupon_code?(Object(c["s"])(),Object(c["d"])("div",y,[C])):Object(c["e"])("",!0),x],8,["disabled"])])])])]),Object(c["g"])("div",V,[Object(c["g"])(ce,{onSubmit:Z.addOrder},{default:Object(c["J"])((function(e){var a=e.errors;return[Object(c["g"])("div",k,[_,Object(c["g"])(te,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":a["email"],"is-valid":!a["email"]&&""!==Y.user.email}],placeholder:"請輸入 Email",modelValue:ee.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return ee.user.email=e}),rules:"email|required"},null,8,["modelValue","class"]),Object(c["g"])(ae,{name:"email",class:"invalid-feedback"})]),Object(c["g"])("div",S,[w,Object(c["g"])(te,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":a["姓名"],"is-valid":""!==Y.user.name&&!a["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:Y.user.name,"onUpdate:modelValue":t[4]||(t[4]=function(e){return Y.user.name=e})},null,8,["class","modelValue"]),Object(c["g"])(ae,{class:"invalid-feedback",name:"姓名"})]),Object(c["g"])("div",q,[A,Object(c["g"])(te,{id:"tel",name:"電話",type:"tel",modelValue:Y.user.tel,"onUpdate:modelValue":t[5]||(t[5]=function(e){return Y.user.tel=e}),class:["form-control",{"is-invalid":a["電話"],"is-valid":!a["電話"]&&""!==Y.user.tel}],placeholder:"請輸入電話",rules:"required|numeric|min:8"},null,8,["modelValue","class"]),Object(c["g"])(ae,{class:"invalid-feedback",name:"電話"})]),Object(c["g"])("div",U,[T,Object(c["g"])(te,{id:"region",name:"地區",class:["form-control",{"is-invalid":a["地區"],"is-valid":""!==Y.user.region&&!a["地區"]}],rules:"required",modelValue:Y.user.region,"onUpdate:modelValue":t[6]||(t[6]=function(e){return Y.user.region=e}),as:"select"},{default:Object(c["J"])((function(){return[M,J,P]})),_:2},1032,["class","modelValue"]),Object(c["g"])(ae,{class:"invalid-feedback",name:"地區"})]),Object(c["g"])("div",B,[E,Object(c["g"])(te,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":a["地址"],"is-valid":""!==Y.user.address&&!a["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:Y.user.address,"onUpdate:modelValue":t[7]||(t[7]=function(e){return Y.user.address=e})},null,8,["class","modelValue"]),Object(c["g"])(ae,{class:"invalid-feedback",name:"地址"})]),Object(c["g"])("div",F,[G,Object(c["g"])(te,{id:"payment",name:"付款方式",class:["form-control",{"is-invalid":a["付款方式"],"is-valid":""!==Y.user.payment&&!a["付款方式"]}],rules:"required",modelValue:Y.user.payment,"onUpdate:modelValue":t[8]||(t[8]=function(e){return Y.user.payment=e}),as:"select"},{default:Object(c["J"])((function(){return[R,z,L,I,K,N,Q]})),_:2},1032,["class","modelValue"]),Object(c["g"])(ae,{class:"invalid-feedback",name:"付款方式"})]),Object(c["g"])("div",W,[$,Object(c["K"])(Object(c["g"])("textarea",{name:"留言",class:"form-control",id:"message",placeholder:"請輸入留言",rows:"10","onUpdate:modelValue":t[9]||(t[9]=function(e){return Y.message=e})},null,512),[[c["G"],Y.message]]),D]),H]})),_:1},8,["onSubmit"])])],64)}a("99af");var Y=a("bc3a"),Z=a.n(Y),ee={data:function(){return{user:{email:"",tel:"",name:"",region:"",address:"",payment:""},message:"",products:{},carts:{},change_cart_qty:0,pagination:"",tempProduct:{},loadingStatus:{},coupon_code:""}},methods:{addCart:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=arguments.length>2?arguments[2]:void 0,n="/api/".concat("hsinyuuu","/cart"),o={product_id:e,qty:a};if("changeQty"===c.target.dataset.action){var s=c.target.value-a;o={product_id:e,qty:s}}"BUTTON"===c.target.nodeName&&(this.loadingStatus.loadingCart=e),this.$refs.productModal.hideModal(),Z.a.post(n,{data:o}).then((function(e){e.data.success?(t.getCart(),t.loadingStatus.loadingCart=""):alert(e.data.message)})).catch((function(e){console.log(e)}))},getCart:function(){var e=this,t="/api/".concat("hsinyuuu","/cart");Z.a.get(t).then((function(t){t.data.success&&(e.carts=t.data.data)})).catch((function(e){console.log(e)}))},removeCartItem:function(e){var t=this,a="/api/".concat("hsinyuuu","/cart/").concat(e);this.loadingStatus.loadingRemoveCart=e,Z.a.delete(a).then((function(e){e.data.success&&(t.getCart(),t.loadingStatus.loadingRemoveCart="")})).catch((function(e){console.log(e)}))},addCoupon:function(){var e=this,t="/api/".concat("hsinyuuu","/coupon"),a={code:this.coupon_code};this.loadingStatus.loadingCoupon=this.coupon_code,Z.a.post(t,{data:a}).then((function(t){if(!t.data.success)return e.loadingStatus.loadingCoupon="",void alert(t.data.message);e.getCart(),e.loadingStatus.loadingCoupon=""})).catch((function(e){console.log(e)}))},addOrder:function(e,t){var a=this,c=t.resetForm,n="/api/".concat("hsinyuuu","/order"),o={user:this.user,message:this.message};this.carts.carts.length?Z.a.post(n,{data:o}).then((function(e){alert(e.data.message),e.data.success&&(a.user={email:"",tel:"",name:"",region:"",address:"",payment:""},a.message="",c())})).catch((function(e){console.log(e)})):alert("購物車無內容")}},mounted:function(){Z.a.defaults.baseURL="https://dev-vue-course-api.hexschool.io",this.getCart()}};ee.render=X;t["default"]=ee},e8b5:function(e,t,a){var c=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==c(e)}}}]);
//# sourceMappingURL=chunk-3300a1ba.cce82414.js.map