(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-325ecce8"],{1463:function(t,e,c){},d2ad:function(t,e,c){"use strict";c("1463")},e6dc:function(t,e,c){"use strict";c.r(e);var a=c("7a23"),o=Object(a["L"])("data-v-a1c5661c");Object(a["v"])("data-v-a1c5661c");var n={class:"table products"},d=Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[Object(a["g"])("th",{scope:"col"},"圖片"),Object(a["g"])("th",{scope:"col"},"商品名稱"),Object(a["g"])("th",{scope:"col"},"價格"),Object(a["g"])("th",{scope:"col"})])],-1),l={scope:"row"},i=Object(a["g"])("br",null,null,-1),s={class:"fw-bold"},r={class:"text-end"},u={class:"btn-group",role:"group","aria-label":"Basic mixed styles example"},b={key:0,class:"spinner-border spinner-border-sm",role:"status"},g=Object(a["g"])("span",{class:"visually-hidden"},"Loading...",-1),p=Object(a["f"])(" 查看更多 "),O={key:0,class:"spinner-border spinner-border-sm",role:"status"},j=Object(a["g"])("span",{class:"visually-hidden"},"Loading...",-1),m=Object(a["f"])(" 加到購物車 ");Object(a["t"])();var h=o((function(t,e,c,o,h,f){var v=Object(a["z"])("pagination"),y=Object(a["z"])("userProductModal");return Object(a["s"])(),Object(a["d"])(a["a"],null,[Object(a["g"])("table",n,[d,Object(a["g"])("tbody",null,[(Object(a["s"])(!0),Object(a["d"])(a["a"],null,Object(a["y"])(h.products,(function(t){return Object(a["s"])(),Object(a["d"])("tr",{key:t.id},[Object(a["g"])("td",l,[Object(a["g"])("img",{src:t.imgUrl,alt:t.title,class:"cart-img"},null,8,["src","alt"])]),Object(a["g"])("td",null,Object(a["C"])(t.title),1),Object(a["g"])("td",null,[Object(a["g"])("del",null,"原價 "+Object(a["C"])(t.origin_price)+" 元",1),i,Object(a["g"])("span",s,"現在只要 "+Object(a["C"])(t.price)+" 元",1)]),Object(a["g"])("td",r,[Object(a["g"])("div",u,[Object(a["g"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(e){return f.getProductInfo(t)}},[h.loadingStatus.loadingItem===t.id?(Object(a["s"])(),Object(a["d"])("div",b,[g])):Object(a["e"])("",!0),p],8,["onClick"]),Object(a["g"])("button",{type:"button",class:"btn btn-outline-primary",onClick:function(e){return f.addCart(t.id,1,e)}},[h.loadingStatus.loadingCart===t.id?(Object(a["s"])(),Object(a["d"])("div",O,[j])):Object(a["e"])("",!0),m],8,["onClick"])])])])})),128))])]),Object(a["g"])(v,{pagination:h.pagination,onChangePage:f.getProduct},null,8,["pagination","onChangePage"]),Object(a["g"])(y,{"temp-product":h.tempProduct,ref:"userProductModal",onAddCart:f.addCart},null,8,["temp-product","onAddCart"])],64)})),f=c("5530"),v=(c("99af"),c("bc3a")),y=c.n(v),P=c("1799"),C=(c("a4d3"),c("e01a"),{class:"modal fade",id:"userProductModal",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true",ref:"modal"}),k={class:"modal-dialog modal-xl"},w={class:"modal-content"},M={class:"modal-header bg-dark text-white"},x={class:"modal-title",id:"exampleModalLabel"},S=Object(a["g"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),_={class:"modal-body"},q={class:"row row-cols-md-2"},I={class:"badge bg-primary rounded-pill"},L={key:0,class:"h5"},U={key:1,class:"h6"},$={key:2,class:"h5"},J={class:"input-group"};function z(t,e,c,o,n,d){return Object(a["s"])(),Object(a["d"])("div",C,[Object(a["g"])("div",k,[Object(a["g"])("div",w,[Object(a["g"])("div",M,[Object(a["g"])("h5",x,Object(a["C"])(t.tempProduct.title),1),S]),Object(a["g"])("div",_,[Object(a["g"])("div",q,[Object(a["g"])("img",{src:t.tempProduct.imgUrl,alt:"tempProduct.title",class:"modal-img"},null,8,["src"]),Object(a["g"])("div",null,[Object(a["g"])("span",I,Object(a["C"])(t.tempProduct.category),1),Object(a["g"])("p",null,"商品描述："+Object(a["C"])(t.tempProduct.description),1),Object(a["g"])("p",null,"商品內容："+Object(a["C"])(t.tempProduct.content),1),t.tempProduct.price?Object(a["e"])("",!0):(Object(a["s"])(),Object(a["d"])("div",L,Object(a["C"])(t.tempProduct.origin_price)+" 元",1)),t.tempProduct.price?(Object(a["s"])(),Object(a["d"])("del",U,"原價 "+Object(a["C"])(t.tempProduct.origin_price)+" 元",1)):Object(a["e"])("",!0),t.tempProduct.price?(Object(a["s"])(),Object(a["d"])("div",$,"現在只要 "+Object(a["C"])(t.tempProduct.price)+" 元",1)):Object(a["e"])("",!0),Object(a["g"])("div",null,[Object(a["g"])("div",J,[Object(a["J"])(Object(a["g"])("input",{type:"number",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=function(t){return n.qty=t}),min:"1"},null,512),[[a["G"],n.qty,void 0,{number:!0}]]),Object(a["g"])("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=function(e){return t.$emit("add-cart",t.tempProduct.id,n.qty,e)})},"加入購物車")])])])])])])])],512)}var A=c("7c2b"),B=c.n(A),N={props:["temp-product"],template:"#userProductModal",data:function(){return{modal:null,qty:1}},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new B.a(this.$refs.modal,{keyboard:!1})}};N.render=z;var T=N,G={data:function(){return{products:{},pagination:"",tempProduct:{},loadingStatus:{}}},components:{pagination:P["a"],userProductModal:T},methods:{getProduct:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="/api/".concat("hsinyuuu","/products?page=").concat(e);y.a.get(c).then((function(e){e.data.success&&(t.products=e.data.products,t.pagination=e.data.pagination)})).catch((function(t){console.log(t)}))},getProductInfo:function(t){var e=this;this.tempProduct=Object(f["a"])({},t);var c=this.tempProduct.id,a="/api/".concat("hsinyuuu","/product/").concat(c);this.loadingStatus.loadingItem=c,y.a.get(a).then((function(t){t.data.success?(e.loadingStatus.loadingItem="",e.$refs.userProductModal.openModal()):alert(t.data.message)})).catch((function(t){console.log(t)}))},addCart:function(t){var e=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,o="/api/".concat("hsinyuuu","/cart"),n={product_id:t,qty:c};if("changeQty"===a.target.dataset.action){var d=a.target.value-c;n={product_id:t,qty:d}}"BUTTON"===a.target.nodeName&&(this.loadingStatus.loadingCart=t),this.$refs.userProductModal.hideModal(),y.a.post(o,{data:n}).then((function(t){t.data.success?e.loadingStatus.loadingCart="":alert(t.data.message)})).catch((function(t){console.log(t)}))}},mounted:function(){y.a.defaults.baseURL="https://dev-vue-course-api.hexschool.io",this.getProduct()}};c("d2ad");G.render=h,G.__scopeId="data-v-a1c5661c";e["default"]=G}}]);
//# sourceMappingURL=chunk-325ecce8.d5bdcb1e.js.map