(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15896d78"],{"07ac":function(e,t,c){var o=c("23e7"),a=c("6f53").values;o({target:"Object",stat:!0},{values:function(e){return a(e)}})},1276:function(e,t,c){"use strict";var o=c("d784"),a=c("44e7"),r=c("825a"),i=c("1d80"),l=c("4840"),n=c("8aa5"),s=c("50c4"),d=c("14c3"),u=c("9263"),p=c("9f7f"),b=p.UNSUPPORTED_Y,m=[].push,h=Math.min,f=4294967295;o("split",2,(function(e,t,c){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,c){var o=String(i(this)),r=void 0===c?f:c>>>0;if(0===r)return[];if(void 0===e)return[o];if(!a(e))return t.call(o,e,r);var l,n,s,d=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),b=0,h=new RegExp(e.source,p+"g");while(l=u.call(h,o)){if(n=h.lastIndex,n>b&&(d.push(o.slice(b,l.index)),l.length>1&&l.index<o.length&&m.apply(d,l.slice(1)),s=l[0].length,b=n,d.length>=r))break;h.lastIndex===l.index&&h.lastIndex++}return b===o.length?!s&&h.test("")||d.push(""):d.push(o.slice(b)),d.length>r?d.slice(0,r):d}:"0".split(void 0,0).length?function(e,c){return void 0===e&&0===c?[]:t.call(this,e,c)}:t,[function(t,c){var a=i(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a,c):o.call(String(a),t,c)},function(e,a){var i=c(o,e,this,a,o!==t);if(i.done)return i.value;var u=r(e),p=String(this),m=l(u,RegExp),g=u.unicode,O=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(b?"g":"y"),j=new m(b?"^(?:"+u.source+")":u,O),v=void 0===a?f:a>>>0;if(0===v)return[];if(0===p.length)return null===d(j,p)?[p]:[];var N=0,V=0,y=[];while(V<p.length){j.lastIndex=b?0:V;var k,P=d(j,b?p.slice(V):p);if(null===P||(k=h(s(j.lastIndex+(b?V:0)),p.length))===N)V=n(p,V,g);else{if(y.push(p.slice(N,V)),y.length===v)return y;for(var B=1;B<=P.length-1;B++)if(y.push(P[B]),y.length===v)return y;V=N=k}}return y.push(p.slice(N)),y}]}),b)},5763:function(e,t,c){"use strict";var o=c("7a23"),a={class:"modal fade",id:"delProductModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},r={class:"modal-dialog"},i={class:"modal-content"},l={class:"modal-header border-0"},n={class:"modal-title",id:"exampleModalLabel"},s=Object(o["createTextVNode"])(" 刪除 "),d={key:0},u={key:1},p={key:2},b=Object(o["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),m={class:"modal-body"},h=Object(o["createTextVNode"])("確定要刪除 "),f={key:0,class:"fw-bold"},g={key:1,class:"fw-bold"},O={key:2,class:"fw-bold"},j=Object(o["createTextVNode"])(" 嗎？"),v=Object(o["createVNode"])("div",{class:"alert alert-danger py-2",role:"alert"},[Object(o["createVNode"])("i",{class:"bi bi-exclamation-triangle me-2"}),Object(o["createTextVNode"])(" 刪除後即無法恢復 ")],-1),N={class:"modal-footer border-0"},V=Object(o["createVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function y(e,t,c,y,k,P){return Object(o["openBlock"])(),Object(o["createBlock"])("div",a,[Object(o["createVNode"])("div",r,[Object(o["createVNode"])("div",i,[Object(o["createVNode"])("div",l,[Object(o["createVNode"])("h5",n,[s,e.tempProduct?(Object(o["openBlock"])(),Object(o["createBlock"])("span",d,"產品")):e.tempCoupon?(Object(o["openBlock"])(),Object(o["createBlock"])("span",u,"優惠券")):(Object(o["openBlock"])(),Object(o["createBlock"])("span",p,"文章"))]),b]),Object(o["createVNode"])("div",m,[Object(o["createVNode"])("p",null,[h,e.tempProduct?(Object(o["openBlock"])(),Object(o["createBlock"])("span",f,Object(o["toDisplayString"])(e.tempProduct.title),1)):Object(o["createCommentVNode"])("",!0),e.tempCoupon?(Object(o["openBlock"])(),Object(o["createBlock"])("span",g,Object(o["toDisplayString"])(e.tempCoupon.title),1)):Object(o["createCommentVNode"])("",!0),e.tempArticle?(Object(o["openBlock"])(),Object(o["createBlock"])("span",O,Object(o["toDisplayString"])(e.tempArticle.title),1)):Object(o["createCommentVNode"])("",!0),j]),v]),Object(o["createVNode"])("div",N,[V,Object(o["createVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=function(){return P.deleteItem&&P.deleteItem.apply(P,arguments)})},"刪除")])])])],512)}c("99af");var k=c("e0ae"),P={props:["temp-product","temp-coupon","temp-article"],emits:["delete"],template:"#delProductModal",data:function(){return{modal:null,api:"",data:{}}},inject:["$httpMessageState"],mixins:[k["a"]],methods:{openModal:function(){this.modal.show()},delete:function(){var e=this;this.isLoading=!0,this.$http.delete(this.api,this.data).then((function(t){if(!t.data.success)return e.$httpMessageState(t,"刪除"),void(e.isLoading=!1);e.modal.hide(),e.$emit("delete"),e.$httpMessageState(t,"刪除"),e.isLoading=!1})).catch((function(t){e.$httpMessageState(t,"連線錯誤"),e.isLoading=!1}))},deleteItem:function(){this.tempProduct?(this.api="/api/".concat("hsinyuuu","/admin/product/").concat(this.tempProduct.id),this.data={data:this.tempProduct}):this.tempCoupon?(this.api="/api/".concat("hsinyuuu","/admin/coupon/").concat(this.tempCoupon.id),this.data={data:this.tempCoupon}):(this.api="/api/".concat("hsinyuuu","/admin/article/").concat(this.tempArticle.id),this.data={data:this.tempArticle}),this.delete()}}},B=c("6b0d"),x=c.n(B);const w=x()(P,[["render",y]]);t["a"]=w},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,c){var o=c("1d80"),a=c("5899"),r="["+a+"]",i=RegExp("^"+r+r+"*"),l=RegExp(r+r+"*$"),n=function(e){return function(t){var c=String(o(t));return 1&e&&(c=c.replace(i,"")),2&e&&(c=c.replace(l,"")),c}};e.exports={start:n(1),end:n(2),trim:n(3)}},"6d09":function(e,t,c){"use strict";c.r(t);var o=c("7a23"),a=Object(o["createVNode"])("header",{class:"mb-5"},[Object(o["createVNode"])("h1",null," 產品管理 ")],-1),r={class:"d-flex justify-content-between align-items-center mt-3 mb-5"},i={class:"input-group w-auto align-items-center border rounded-3"},l=Object(o["createVNode"])("div",{class:"input-text px-3"},[Object(o["createVNode"])("i",{class:"bi bi-search"})],-1),n={key:0,class:"input-group w-auto align-items-center"},s=Object(o["createVNode"])("label",{for:"sort",class:"me-2"},"排序",-1),d=Object(o["createVNode"])("option",{selected:"",value:""},"日期由新到舊（預設）",-1),u={key:0,class:"alert alert-danger border-0"},p={class:"nav nav-pills mb-3"},b={class:"nav-item"},m={class:"nav-item"},h={class:"nav-item"},f={class:"table table-borderless table-hover"},g=Object(o["createVNode"])("thead",{class:"bg-light rounded-3"},[Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th",{scope:"col"},"分類"),Object(o["createVNode"])("th",{scope:"col"},"產品名稱"),Object(o["createVNode"])("th",{scope:"col"},"原價"),Object(o["createVNode"])("th",{scope:"col"},"售價"),Object(o["createVNode"])("th",{scope:"col",class:"text-end"},"是否啟用"),Object(o["createVNode"])("th",{scope:"col",class:"text-end"},"編輯 / 刪除")])],-1),O={scope:"row"},j={class:"text-muted"},v={class:"text-end"},N={class:"btn-group",role:"group","aria-label":"Basic mixed styles example"},V={key:1,class:"text-center text-muted"},y={key:0},k={key:1};function P(e,t,c,P,B,x){var w=Object(o["resolveComponent"])("Loading"),M=Object(o["resolveComponent"])("Pagination"),U=Object(o["resolveComponent"])("ProductModal"),S=Object(o["resolveComponent"])("DelItemModal");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(w,{active:B.isLoading,"z-index":100,loader:"dots",color:"#384D48"},null,8,["active"]),a,Object(o["createVNode"])("div",r,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=function(e){return x.openModal("new")})}," 新增產品 "),Object(o["createVNode"])("div",i,[l,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"search","onUpdate:modelValue":t[2]||(t[2]=function(e){return B.productSearchBar=e}),placeholder:"搜尋商品名稱",class:"form-control border-0"},null,512),[[o["vModelText"],B.productSearchBar,void 0,{trim:!0}]])]),B.products?(Object(o["openBlock"])(),Object(o["createBlock"])("div",n,[s,Object(o["withDirectives"])(Object(o["createVNode"])("select",{class:"form-select","aria-label":"select","onUpdate:modelValue":t[3]||(t[3]=function(e){return B.sortBy=e}),id:"sort"},[d,Object(o["createVNode"])("option",{value:"priceFromHighest",disabled:!B.products.length},"售價由高至低",8,["disabled"]),Object(o["createVNode"])("option",{value:"priceFromLowest",disabled:!B.products.length},"售價由低至高",8,["disabled"])],512),[[o["vModelSelect"],B.sortBy]])])):Object(o["createCommentVNode"])("",!0)]),B.productSearchBar&&B.searchResults?(Object(o["openBlock"])(),Object(o["createBlock"])("div",u,Object(o["toDisplayString"])(B.searchResults),1)):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("ul",p,[Object(o["createVNode"])("li",b,[Object(o["createVNode"])("a",{class:["nav-link rounded-pill",{active:""===B.filterBy}],href:"#",onClick:t[4]||(t[4]=Object(o["withModifiers"])((function(e){return x.getProducts(1,"allProducts")}),["prevent"]))}," 所有產品 ",2)]),Object(o["createVNode"])("li",m,[Object(o["createVNode"])("a",{class:["nav-link rounded-pill",{active:"active"===B.filterBy}],href:"#",onClick:t[5]||(t[5]=Object(o["withModifiers"])((function(e){return x.filterData("active")}),["prevent"]))}," 已啟用 ",2)]),Object(o["createVNode"])("li",h,[Object(o["createVNode"])("a",{class:["nav-link rounded-pill",{active:"inactive"===B.filterBy}],href:"#",onClick:t[6]||(t[6]=Object(o["withModifiers"])((function(e){return x.filterData("inactive")}),["prevent"]))}," 未啟用 ",2)])]),Object(o["createVNode"])("table",f,[g,Object(o["createVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(B.products,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:t.id},[Object(o["createVNode"])("td",O,Object(o["toDisplayString"])(t.category),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(t.title),1),Object(o["createVNode"])("td",j,Object(o["toDisplayString"])(e.$filters.currency(t.origin_price)),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.$filters.currency(t.price)),1),Object(o["createVNode"])("td",{class:[t.is_enabled?"text-success":"text-muted","text-end"]},Object(o["toDisplayString"])(t.is_enabled?"啟用":"未啟用"),3),Object(o["createVNode"])("td",v,[Object(o["createVNode"])("div",N,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary border-0 bi bi-pencil-fill",onClick:function(e){return x.openModal("edit",t)}},null,8,["onClick"]),Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-danger border-0 bi bi-trash-fill",onClick:function(e){return x.openModal("delete",t)}},null,8,["onClick"])])])])})),128))])]),""===B.filterBy||B.products.length?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("p",V,["inactive"===B.filterBy?(Object(o["openBlock"])(),Object(o["createBlock"])("span",y,"無未啟用產品")):"active"===B.filterBy?(Object(o["openBlock"])(),Object(o["createBlock"])("span",k,"無已啟用產品")):Object(o["createCommentVNode"])("",!0)])),Object(o["createVNode"])(M,{pagination:B.pagination,onChangePage:x.getProducts},null,8,["pagination","onChangePage"]),Object(o["createVNode"])(U,{"temp-product":B.tempProduct,"is-new":B.isNew,ref:"productModal",onUpdate:x.getProducts},null,8,["temp-product","is-new","onUpdate"]),Object(o["createVNode"])(S,{"temp-product":B.tempProduct,products:B.products,ref:"delItemModal",onDelete:x.getProducts},null,8,["temp-product","products","onDelete"])],64)}var B=c("5530"),x=(c("99af"),c("07ac"),c("4de4"),c("caad"),c("2532"),c("1799")),w=(c("a4d3"),c("e01a"),c("b64b"),{class:"modal fade",id:"productModal",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true",ref:"modal"}),M={class:"modal-dialog modal-xl modal-dialog-scrollable"},U={class:"modal-content"},S={class:"modal-header border-0"},C={class:"modal-title",id:"exampleModalLabel"},I={key:0},L={key:1},_=Object(o["createTextVNode"])("產品 "),$=Object(o["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),D={class:"modal-body"},F={class:"row"},T={class:"col-sm-3 product-modal-pictures"},A=Object(o["createVNode"])("label",{class:"form-label h6"},[Object(o["createTextVNode"])(" 新增主圖 "),Object(o["createVNode"])("span",{class:"text-warning ms-3"},"必填")],-1),E={class:"form-group mb-3 bg-light p-3 rounded-3"},R=Object(o["createVNode"])("label",{for:"imageUrl",class:"form-label"},"輸入主圖片網址",-1),q={for:"customFile",class:"form-label"},J=Object(o["createTextVNode"])("或 上傳圖片 "),G={key:0,class:"spinner-border spinner-border-sm",role:"status"},H=Object(o["createVNode"])("span",{class:"visually-hidden"},"Loading...",-1),Y={class:"form-group mb-3"},z=Object(o["createVNode"])("label",{class:"form-label h6"},"新增多圖",-1),X={class:"input-group mb-3"},K=Object(o["createTextVNode"])("或 上傳圖片 "),Q={key:0,class:"spinner-border spinner-border-sm",role:"status"},W=Object(o["createVNode"])("span",{class:"visually-hidden"},"Loading...",-1),Z={key:0,class:"text-muted"},ee={key:0},te={class:"col-sm-9"},ce=Object(o["createVNode"])("p",{class:"h6 text-warning d-inline-block"},"此區為必填項目",-1),oe={class:"bg-light mb-3 rounded-3 p-3"},ae=Object(o["createVNode"])("label",{for:"title",class:"form-label"},"標題",-1),re={class:"row mb-3"},ie={class:"col-sm-6"},le=Object(o["createVNode"])("label",{for:"category",class:"form-label"},"分類",-1),ne={class:"col-sm-6"},se=Object(o["createVNode"])("label",{for:"unit",class:"form-label"},"單位",-1),de={class:"row mb-3"},ue={class:"col-sm-6"},pe=Object(o["createVNode"])("label",{for:"origin_price",class:"form-label"},"原價",-1),be={class:"col-sm-6"},me=Object(o["createVNode"])("label",{for:"price",class:"form-label"},"售價",-1),he={class:"bg-light mb-3 rounded-3 p-3"},fe=Object(o["createVNode"])("label",{for:"content",class:"form-label"},"說明內容",-1),ge=Object(o["createVNode"])("label",{for:"description",class:"form-label"},"產品描述",-1),Oe=Object(o["createVNode"])("label",{for:"is_enabled",class:"form-label"},"是否啟用",-1),je={class:"modal-footer border-0"},ve=Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Ne(e,t,c,a,r,i){var l=this,n=Object(o["resolveComponent"])("Loading"),s=Object(o["resolveComponent"])("Field"),d=Object(o["resolveComponent"])("ErrorMessage"),u=Object(o["resolveComponent"])("Form");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(n,{active:r.isLoading,"z-index":100},null,8,["active"]),Object(o["createVNode"])("div",w,[Object(o["createVNode"])("div",M,[Object(o["createVNode"])("div",U,[Object(o["createVNode"])("div",S,[Object(o["createVNode"])("h5",C,[c.isNew?(Object(o["openBlock"])(),Object(o["createBlock"])("span",I,"新增")):(Object(o["openBlock"])(),Object(o["createBlock"])("span",L,"編輯")),_]),$]),Object(o["createVNode"])("div",D,[Object(o["createVNode"])(u,{onSubmit:i.updateProduct,ref:"form"},{default:Object(o["withCtx"])((function(e){var c=e.errors;return[Object(o["createVNode"])("div",F,[Object(o["createVNode"])("div",T,[A,Object(o["createVNode"])("div",E,[R,Object(o["createVNode"])(s,{type:"text",class:["form-control mb-3",{"is-invalid":c["圖片"],"is-valid":r.product.imageUrl}],id:"imageUrl",placeholder:"https://picsum.photos/300/200",modelValue:r.product.imageUrl,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.product.imageUrl=e}),name:"圖片",rules:"required",required:""},null,8,["modelValue","class"]),Object(o["createVNode"])(d,{name:"圖片",class:"invalid-feedback"}),Object(o["createVNode"])("label",q,[J,"e"===r.loadingUploadImg?(Object(o["openBlock"])(),Object(o["createBlock"])("div",G,[H])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("input",{type:"file",id:"customFile",class:"form-control mb-3",onChange:t[2]||(t[2]=function(e){return i.uploadImg(e)})},null,32),Object(o["createVNode"])("img",{src:l.product.imageUrl,alt:r.product.title,class:"img-fluid mb-3"},null,8,["src","alt"])]),Object(o["createVNode"])("div",Y,[z,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(r.product.imagesUrl,(function(e,c){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:c,class:"mb-3 pb-3 border-bottom"},[Object(o["createVNode"])("label",{for:"imagesUrl".concat(c),class:"form-label small"},"輸入圖片網址",8,["for"]),Object(o["createVNode"])("div",X,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text","onUpdate:modelValue":function(e){return r.product.imagesUrl[c]=e},id:"imagesUrl".concat(c),class:"form-control"},null,8,["onUpdate:modelValue","id"]),[[o["vModelText"],r.product.imagesUrl[c]]]),Object(o["createVNode"])("button",{class:"btn btn-outline-danger",type:"button",id:"button-addon2",onClick:function(e){return i.removeImage(c)}}," 移除 ",8,["onClick"])]),Object(o["createVNode"])("label",{for:"customFile".concat(c),class:"form-label small"},[K,r.loadingUploadImg==="".concat(c)?(Object(o["openBlock"])(),Object(o["createBlock"])("div",Q,[W])):Object(o["createCommentVNode"])("",!0)],8,["for"]),Object(o["createVNode"])("input",{type:"file",id:"customFile".concat(c),class:"form-control mb-3",onChange:t[3]||(t[3]=function(e){return i.uploadImg(e)})},null,40,["id"]),r.product.imagesUrl[c]?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("p",Z,"請輸入圖片網址或上傳圖片！")),Object(o["createVNode"])("img",{src:l.product.imagesUrl[c],alt:r.product.title+c,class:"img-fluid"},null,8,["src","alt"])])})),128))]),Array.isArray(r.product.imagesUrl)?(Object(o["openBlock"])(),Object(o["createBlock"])("div",ee,[!r.product.imagesUrl.length||r.product.imagesUrl[r.product.imagesUrl.length-1]?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,type:"button",class:"w-100 mb-3 btn btn-outline-primary",onClick:t[4]||(t[4]=function(){return i.createImage&&i.createImage.apply(i,arguments)})}," 新增圖片 ")):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("div",te,[ce,Object(o["createVNode"])("div",oe,[ae,Object(o["createVNode"])(s,{type:"text",class:["form-control mb-3",{"is-invalid":c["標題"],"is-valid":r.product.title}],id:"title",placeholder:"請輸入標題",modelValue:r.product.title,"onUpdate:modelValue":t[5]||(t[5]=function(e){return r.product.title=e}),name:"標題",rules:"required",required:""},null,8,["modelValue","class"]),Object(o["createVNode"])(d,{name:"標題",class:"invalid-feedback mb-3"}),Object(o["createVNode"])("div",re,[Object(o["createVNode"])("div",ie,[le,Object(o["createVNode"])(s,{type:"text",class:["form-control",{"is-invalid":c["分類"],"is-valid":r.product.category}],id:"category",placeholder:"請輸入分類",modelValue:r.product.category,"onUpdate:modelValue":t[6]||(t[6]=function(e){return r.product.category=e}),name:"分類",rules:"required"},null,8,["modelValue","class"]),Object(o["createVNode"])(d,{name:"分類",class:"invalid-feedback"})]),Object(o["createVNode"])("div",ne,[se,Object(o["createVNode"])(s,{type:"text",class:["form-control",{"is-invalid":c["單位"],"is-valid":r.product.unit}],id:"unit",placeholder:"請輸入單位",modelValue:r.product.unit,"onUpdate:modelValue":t[7]||(t[7]=function(e){return r.product.unit=e}),rules:"required",name:"單位"},null,8,["modelValue","class"]),Object(o["createVNode"])(d,{name:"單位",class:"invalid-feedback"})])]),Object(o["createVNode"])("div",de,[Object(o["createVNode"])("div",ue,[pe,Object(o["createVNode"])(s,{type:"number",class:["form-control",{"is-invalid":c["原價"],"is-valid":r.product.origin_price}],id:"origin_price",placeholder:"請輸入原價",modelValue:r.product.origin_price,"onUpdate:modelValue":t[8]||(t[8]=function(e){return r.product.origin_price=e}),modelModifiers:{number:!0},name:"原價",rules:"required"},null,8,["modelValue","class"]),Object(o["createVNode"])(d,{name:"原價",class:"invalid-feedback"})]),Object(o["createVNode"])("div",be,[me,Object(o["createVNode"])(s,{type:"number",class:["form-control",{"is-invalid":c["售價"],"is-valid":r.product.price}],id:"price",placeholder:"請輸入售價",modelValue:r.product.price,"onUpdate:modelValue":t[9]||(t[9]=function(e){return r.product.price=e}),modelModifiers:{number:!0},name:"售價",rules:"required"},null,8,["modelValue","class"]),Object(o["createVNode"])(d,{name:"售價",class:"invalid-feedback"})])])]),Object(o["createVNode"])("div",he,[fe,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{class:"form-control mb-3",id:"content",rows:"3",placeholder:"說明內容","onUpdate:modelValue":t[10]||(t[10]=function(e){return r.product.content=e})},null,512),[[o["vModelText"],r.product.content]]),ge,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{class:"form-control mb-3",id:"description",rows:"3",placeholder:"產品描述","onUpdate:modelValue":t[11]||(t[11]=function(e){return r.product.description=e})},null,512),[[o["vModelText"],r.product.description]]),Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"checkbox",id:"is_enabled",checked:r.product.is_enabled,class:"me-2","onUpdate:modelValue":t[12]||(t[12]=function(e){return r.product.is_enabled=e})},null,8,["checked"]),[[o["vModelCheckbox"],r.product.is_enabled]]),Oe])])]),Object(o["createVNode"])("div",je,[ve,Object(o["createVNode"])("button",{type:"submit",class:"btn btn-primary",disabled:0!==Object.keys(c).length}," 確認 ",8,["disabled"])])]})),_:1},8,["onSubmit"])])])])],512)],64)}c("159b"),c("ac1f"),c("1276"),c("9129"),c("a9e3"),c("a434");var Ve=c("e0ae"),ye={props:["temp-product","isNew"],template:"#productModal",data:function(){return{modal:null,isLoading:!1,product:{category:"",id:"",imageUrl:"",imagesUrl:[],is_enabled:0,num:"",origin_price:"",price:"",title:"",unit:""},loadingUploadImg:!1}},emits:["update"],inject:["emitter","$httpMessageState"],mixins:[Ve["a"]],methods:{openModal:function(){this.isNew?(this.product={category:"",id:"",imageUrl:"",imagesUrl:[],is_enabled:0,num:"",origin_price:"",price:"",title:"",unit:""},this.$refs.form.resetForm()):document.querySelectorAll(".is-valid").forEach((function(e){e.classList.remove("is-valid")})),this.modal.show()},updateProduct:function(){var e=this;this.isLoading=!0;var t,c=this.tempProduct.id,o="post",a="新增";this.tempProduct.origin_price<0||this.tempProduct.price<0||this.num<0?this.emitter.emit("push-message",{style:"danger",title:"".concat(a,"失敗"),content:"價錢 / 數量不得為負數"}):(c?(t="/api/".concat("hsinyuuu","/admin/product/").concat(c),o="put",a="更新"):(this.tempProduct.id=(new Date).getTime(),t="/api/".concat("hsinyuuu","/admin/product")),this.$http[o](t,{data:this.product}).then((function(t){if(!t.data.success)return e.$httpMessageState(t,"".concat(a,"產品")),void(e.isLoading=!1);e.modal.hide(),e.$emit("update"),e.$httpMessageState(t,"".concat(a,"產品")),e.isLoading=!1})).catch((function(t){e.$httpMessageState(t,"連線錯誤"),e.isLoading=!1})))},uploadImg:function(e){var t=this,c=e.target.id,o=c.split("")[c.length-1];this.loadingUploadImg=o;var a=e.target.files[0],r=new FormData;r.append("file-to-upload",a);var i="/api/".concat("hsinyuuu","/admin/upload");this.$http.post(i,r).then((function(e){if(!e.data.success)return t.$httpMessageState(e,"上傳圖片"),void(t.loadingUploadImg=!1);Number.isNaN(o)?t.product.imageUrl=e.data.imageUrl:t.product.imagesUrl[o]=e.data.imageUrl,t.loadingUploadImg=!1})).catch((function(e){t.$httpMessageState(e,"連線錯誤"),t.loadingUploadImg=!1}))},createImage:function(){this.product.imagesUrl.push("")},removeImage:function(e){this.product.imagesUrl.splice(e,1)}},watch:{tempProduct:function(e){this.product=e}}},ke=c("6b0d"),Pe=c.n(ke);const Be=Pe()(ye,[["render",Ne]]);var xe=Be,we=c("5763"),Me={components:{Pagination:x["a"],ProductModal:xe,DelItemModal:we["a"]},data:function(){return{products:"",tempProduct:{},pagination:"",isNew:!1,isLoading:!1,current_page:1,sortBy:"",productSearchBar:"",searchResults:"",filterBy:"",filtedProducts:"",sortedProducts:"",allProducts:"",matchProducts:""}},inject:["$httpMessageState"],methods:{openModal:function(e,t){var c=this;switch(e){case"new":this.tempProduct={category:"",id:"",imageUrl:"",imagesUrl:[],is_enabled:0,num:"",origin_price:"",price:"",title:"",unit:""},this.isNew=!0,setTimeout((function(){c.$refs.productModal.openModal()}));break;case"edit":this.tempProduct=JSON.parse(JSON.stringify(t)),this.isNew=!1,this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[]),setTimeout((function(){c.$refs.productModal.openModal()}));break;case"delete":this.tempProduct=Object(B["a"])({},t),this.$refs.delItemModal.openModal();break;default:break}},getProducts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current_page,c=arguments.length>1?arguments[1]:void 0;if(""===this.pagination||"allProducts"!==c){this.isLoading=!0;var o="/api/".concat("hsinyuuu","/admin/products?page=").concat(t);this.$http.get(o).then((function(t){if(!t.data.success)return e.$httpMessageState(t,"取得產品資料"),void(e.isLoading=!1);e.products=t.data.products,e.filterBy="",e.filtedProducts="",e.matchProducts="",e.pagination=t.data.pagination,e.current_page=t.data.pagination.current_page,e.getAllProducts(),e.isLoading=!1})).catch((function(t){e.$httpMessageState(t,"連線錯誤"),e.isLoading=!1}))}},getAllProducts:function(){var e=this;this.isLoading=!0;var t="/api/".concat("hsinyuuu","/admin/products/all");this.$http.get(t).then((function(t){if(!t.data.success)return e.$httpMessageState(t,"取得產品資料"),void(e.isLoading=!1);e.allProducts=Object.values(t.data.products),""!==e.productSearchBar&&e.searchProducts(),""!==e.sortedProducts&&e.sortProducts(e.sortBy),e.isLoading=!1})).catch((function(t){e.$httpMessageState(t,"連線錯誤"),e.isLoading=!1}))},sortProducts:function(e){var t=[];switch(this.pagination="",t=this.filtedProducts?this.filtedProducts:this.matchProducts?this.matchProducts:this.allProducts,e){case"priceFromLowest":t.sort((function(e,t){return e.price-t.price}));break;case"priceFromHighest":t.sort((function(e,t){return t.price-e.price}));break;default:break}this.sortedProducts=t,this.products=this.sortedProducts},searchProducts:function(){var e=this;this.matchProducts=this.allProducts.filter((function(t){return t.title.toLowerCase().includes(e.productSearchBar.toLowerCase())})),this.matchProducts.length?(this.searchResults="",this.products=this.matchProducts,""!==this.sortedProducts?this.sortProducts(this.sortBy):(this.sortBy="",this.sortedProducts=""),this.filterBy="",this.filtedProducts="",this.pagination=""):this.searchResults="無符合搜尋結果，請再試試其他關鍵字～"},filterData:function(e){if(!this.filterBy||this.filterBy!==e){this.pagination="",this.filterBy=e;var t=[];switch(t=this.matchProducts?this.matchProducts:this.allProducts,e){case"active":this.filtedProducts=t.filter((function(e){return e.is_enabled}));break;case"inactive":this.filtedProducts=t.filter((function(e){return!e.is_enabled}));break;default:break}this.sortedProducts?this.sortProducts(this.sortBy):this.products=this.filtedProducts}}},watch:{sortBy:function(e,t){this.pagination="",e===t?"priceFromLowest"!==e&&"priceFromHighest"!==e||this.sortProducts(this.sortBy):""===e?(this.sortedProducts="",this.getProducts()):this.sortProducts(this.sortBy)},productSearchBar:function(e){""!==e?this.getAllProducts():this.getProducts()}},mounted:function(){this.$http.defaults.baseURL="https://vue3-course-api.hexschool.io",this.getProducts()}};const Ue=Pe()(Me,[["render",P]]);t["default"]=Ue},"6f53":function(e,t,c){var o=c("83ab"),a=c("df75"),r=c("fc6a"),i=c("d1e7").f,l=function(e){return function(t){var c,l=r(t),n=a(l),s=n.length,d=0,u=[];while(s>d)c=n[d++],o&&!i.call(l,c)||u.push(e?[c,l[c]]:l[c]);return u}};e.exports={entries:l(!0),values:l(!1)}},7156:function(e,t,c){var o=c("861d"),a=c("d2bb");e.exports=function(e,t,c){var r,i;return a&&"function"==typeof(r=t.constructor)&&r!==c&&o(i=r.prototype)&&i!==c.prototype&&a(e,i),e}},9129:function(e,t,c){var o=c("23e7");o({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},a434:function(e,t,c){"use strict";var o=c("23e7"),a=c("23cb"),r=c("a691"),i=c("50c4"),l=c("7b0b"),n=c("65f0"),s=c("8418"),d=c("1dde"),u=d("splice"),p=Math.max,b=Math.min,m=9007199254740991,h="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var c,o,d,u,f,g,O=l(this),j=i(O.length),v=a(e,j),N=arguments.length;if(0===N?c=o=0:1===N?(c=0,o=j-v):(c=N-2,o=b(p(r(t),0),j-v)),j+c-o>m)throw TypeError(h);for(d=n(O,o),u=0;u<o;u++)f=v+u,f in O&&s(d,u,O[f]);if(d.length=o,c<o){for(u=v;u<j-o;u++)f=u+o,g=u+c,f in O?O[g]=O[f]:delete O[g];for(u=j;u>j-o+c;u--)delete O[u-1]}else if(c>o)for(u=j-o;u>v;u--)f=u+o-1,g=u+c-1,f in O?O[g]=O[f]:delete O[g];for(u=0;u<c;u++)O[u+v]=arguments[u+2];return O.length=j-o+c,d}})},a9e3:function(e,t,c){"use strict";var o=c("83ab"),a=c("da84"),r=c("94ca"),i=c("6eeb"),l=c("5135"),n=c("c6b6"),s=c("7156"),d=c("c04e"),u=c("d039"),p=c("7c73"),b=c("241c").f,m=c("06cf").f,h=c("9bf2").f,f=c("58a8").trim,g="Number",O=a[g],j=O.prototype,v=n(p(j))==g,N=function(e){var t,c,o,a,r,i,l,n,s=d(e,!1);if("string"==typeof s&&s.length>2)if(s=f(s),t=s.charCodeAt(0),43===t||45===t){if(c=s.charCodeAt(2),88===c||120===c)return NaN}else if(48===t){switch(s.charCodeAt(1)){case 66:case 98:o=2,a=49;break;case 79:case 111:o=8,a=55;break;default:return+s}for(r=s.slice(2),i=r.length,l=0;l<i;l++)if(n=r.charCodeAt(l),n<48||n>a)return NaN;return parseInt(r,o)}return+s};if(r(g,!O(" 0o1")||!O("0b1")||O("+0x1"))){for(var V,y=function(e){var t=arguments.length<1?0:e,c=this;return c instanceof y&&(v?u((function(){j.valueOf.call(c)})):n(c)!=g)?s(new O(N(t)),c,y):N(t)},k=o?b(O):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),P=0;k.length>P;P++)l(O,V=k[P])&&!l(y,V)&&h(y,V,m(O,V));y.prototype=j,j.constructor=y,i(a,g,y)}},e01a:function(e,t,c){"use strict";var o=c("23e7"),a=c("83ab"),r=c("da84"),i=c("5135"),l=c("861d"),n=c("9bf2").f,s=c("e893"),d=r.Symbol;if(a&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new d(e):void 0===e?d():d(e);return""===e&&(u[t]=!0),t};s(p,d);var b=p.prototype=d.prototype;b.constructor=p;var m=b.toString,h="Symbol(test)"==String(d("test")),f=/^Symbol\((.*)\)[^)]+$/;n(b,"description",{configurable:!0,get:function(){var e=l(this)?this.valueOf():this,t=m.call(e);if(i(u,e))return"";var c=h?t.slice(7,-1):t.replace(f,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:p})}}}]);
//# sourceMappingURL=chunk-15896d78.06631bb1.js.map