(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cea6269a"],{"159b":function(t,e,c){var o=c("da84"),a=c("fdbc"),r=c("17c2"),n=c("9112");for(var i in a){var s=o[i],d=s&&s.prototype;if(d&&d.forEach!==r)try{n(d,"forEach",r)}catch(l){d.forEach=r}}},"17c2":function(t,e,c){"use strict";var o=c("b727").forEach,a=c("a640"),r=a("forEach");t.exports=r?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,e,c){var o=c("d039"),a=c("b622"),r=c("2d00"),n=a("species");t.exports=function(t){return r>=51||!o((function(){var e=[],c=e.constructor={};return c[n]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},2532:function(t,e,c){"use strict";var o=c("23e7"),a=c("5a34"),r=c("1d80"),n=c("ab13");o({target:"String",proto:!0,forced:!n("includes")},{includes:function(t){return!!~String(r(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(t,e,c){var o=c("861d"),a=c("c6b6"),r=c("b622"),n=r("match");t.exports=function(t){var e;return o(t)&&(void 0!==(e=t[n])?!!e:"RegExp"==a(t))}},"4de4":function(t,e,c){"use strict";var o=c("23e7"),a=c("b727").filter,r=c("1dde"),n=r("filter");o({target:"Array",proto:!0,forced:!n},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"5a34":function(t,e,c){var o=c("44e7");t.exports=function(t){if(o(t))throw TypeError("The method doesn't accept regular expressions");return t}},6062:function(t,e,c){"use strict";var o=c("6d61"),a=c("6566");t.exports=o("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),a)},6566:function(t,e,c){"use strict";var o=c("9bf2").f,a=c("7c73"),r=c("e2cc"),n=c("0366"),i=c("19aa"),s=c("2266"),d=c("7dd0"),l=c("2626"),u=c("83ab"),b=c("f183").fastKey,p=c("69f3"),f=p.set,h=p.getterFor;t.exports={getConstructor:function(t,e,c,d){var l=t((function(t,o){i(t,l,e),f(t,{type:e,index:a(null),first:void 0,last:void 0,size:0}),u||(t.size=0),void 0!=o&&s(o,t[d],{that:t,AS_ENTRIES:c})})),p=h(e),g=function(t,e,c){var o,a,r=p(t),n=v(t,e);return n?n.value=c:(r.last=n={index:a=b(e,!0),key:e,value:c,previous:o=r.last,next:void 0,removed:!1},r.first||(r.first=n),o&&(o.next=n),u?r.size++:t.size++,"F"!==a&&(r.index[a]=n)),t},v=function(t,e){var c,o=p(t),a=b(e);if("F"!==a)return o.index[a];for(c=o.first;c;c=c.next)if(c.key==e)return c};return r(l.prototype,{clear:function(){var t=this,e=p(t),c=e.index,o=e.first;while(o)o.removed=!0,o.previous&&(o.previous=o.previous.next=void 0),delete c[o.index],o=o.next;e.first=e.last=void 0,u?e.size=0:t.size=0},delete:function(t){var e=this,c=p(e),o=v(e,t);if(o){var a=o.next,r=o.previous;delete c.index[o.index],o.removed=!0,r&&(r.next=a),a&&(a.previous=r),c.first==o&&(c.first=a),c.last==o&&(c.last=r),u?c.size--:e.size--}return!!o},forEach:function(t){var e,c=p(this),o=n(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:c.first){o(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!v(this,t)}}),r(l.prototype,c?{get:function(t){var e=v(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),u&&o(l.prototype,"size",{get:function(){return p(this).size}}),l},setStrong:function(t,e,c){var o=e+" Iterator",a=h(e),r=h(o);d(t,e,(function(t,e){f(this,{type:o,target:t,state:a(t),kind:e,last:void 0})}),(function(){var t=r(this),e=t.kind,c=t.last;while(c&&c.removed)c=c.previous;return t.target&&(t.last=c=c?c.next:t.state.first)?"keys"==e?{value:c.key,done:!1}:"values"==e?{value:c.value,done:!1}:{value:[c.key,c.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),c?"entries":"values",!c,!0),l(e)}}},"65f0":function(t,e,c){var o=c("861d"),a=c("e8b5"),r=c("b622"),n=r("species");t.exports=function(t,e){var c;return a(t)&&(c=t.constructor,"function"!=typeof c||c!==Array&&!a(c.prototype)?o(c)&&(c=c[n],null===c&&(c=void 0)):c=void 0),new(void 0===c?Array:c)(0===e?0:e)}},"6d61":function(t,e,c){"use strict";var o=c("23e7"),a=c("da84"),r=c("94ca"),n=c("6eeb"),i=c("f183"),s=c("2266"),d=c("19aa"),l=c("861d"),u=c("d039"),b=c("1c7e"),p=c("d44e"),f=c("7156");t.exports=function(t,e,c){var h=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),v=h?"set":"add",O=a[t],j=O&&O.prototype,m=O,y={},N=function(t){var e=j[t];n(j,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:function(t,c){return e.call(this,0===t?0:t,c),this})},V=r(t,"function"!=typeof O||!(g||j.forEach&&!u((function(){(new O).entries().next()}))));if(V)m=c.getConstructor(e,t,h,v),i.REQUIRED=!0;else if(r(t,!0)){var x=new m,k=x[v](g?{}:-0,1)!=x,S=u((function(){x.has(1)})),C=b((function(t){new O(t)})),w=!g&&u((function(){var t=new O,e=5;while(e--)t[v](e,e);return!t.has(-0)}));C||(m=e((function(e,c){d(e,m,t);var o=f(new O,e,m);return void 0!=c&&s(c,o[v],{that:o,AS_ENTRIES:h}),o})),m.prototype=j,j.constructor=m),(S||w)&&(N("delete"),N("has"),h&&N("get")),(w||k)&&N(v),g&&j.clear&&delete j.clear}return y[t]=m,o({global:!0,forced:m!=O},y),p(m,t),g||c.setStrong(m,t,h),m}},7156:function(t,e,c){var o=c("861d"),a=c("d2bb");t.exports=function(t,e,c){var r,n;return a&&"function"==typeof(r=e.constructor)&&r!==c&&o(n=r.prototype)&&n!==c.prototype&&a(t,n),t}},8418:function(t,e,c){"use strict";var o=c("c04e"),a=c("9bf2"),r=c("5c6c");t.exports=function(t,e,c){var n=o(e);n in t?a.f(t,n,r(0,c)):t[n]=c}},"99af":function(t,e,c){"use strict";var o=c("23e7"),a=c("d039"),r=c("e8b5"),n=c("861d"),i=c("7b0b"),s=c("50c4"),d=c("8418"),l=c("65f0"),u=c("1dde"),b=c("b622"),p=c("2d00"),f=b("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",v=p>=51||!a((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),O=u("concat"),j=function(t){if(!n(t))return!1;var e=t[f];return void 0!==e?!!e:r(t)},m=!v||!O;o({target:"Array",proto:!0,forced:m},{concat:function(t){var e,c,o,a,r,n=i(this),u=l(n,0),b=0;for(e=-1,o=arguments.length;e<o;e++)if(r=-1===e?n:arguments[e],j(r)){if(a=s(r.length),b+a>h)throw TypeError(g);for(c=0;c<a;c++,b++)c in r&&d(u,b,r[c])}else{if(b>=h)throw TypeError(g);d(u,b++,r)}return u.length=b,u}})},a434:function(t,e,c){"use strict";var o=c("23e7"),a=c("23cb"),r=c("a691"),n=c("50c4"),i=c("7b0b"),s=c("65f0"),d=c("8418"),l=c("1dde"),u=l("splice"),b=Math.max,p=Math.min,f=9007199254740991,h="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var c,o,l,u,g,v,O=i(this),j=n(O.length),m=a(t,j),y=arguments.length;if(0===y?c=o=0:1===y?(c=0,o=j-m):(c=y-2,o=p(b(r(e),0),j-m)),j+c-o>f)throw TypeError(h);for(l=s(O,o),u=0;u<o;u++)g=m+u,g in O&&d(l,u,O[g]);if(l.length=o,c<o){for(u=m;u<j-o;u++)g=u+o,v=u+c,g in O?O[v]=O[g]:delete O[v];for(u=j;u>j-o+c;u--)delete O[u-1]}else if(c>o)for(u=j-o;u>m;u--)g=u+o-1,v=u+c-1,g in O?O[v]=O[g]:delete O[v];for(u=0;u<c;u++)O[u+m]=arguments[u+2];return O.length=j-o+c,l}})},a640:function(t,e,c){"use strict";var o=c("d039");t.exports=function(t,e){var c=[][t];return!!c&&o((function(){c.call(null,e||function(){throw 1},1)}))}},ab13:function(t,e,c){var o=c("b622"),a=o("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(c){try{return e[a]=!1,"/./"[t](e)}catch(o){}}return!1}},b727:function(t,e,c){var o=c("0366"),a=c("44ad"),r=c("7b0b"),n=c("50c4"),i=c("65f0"),s=[].push,d=function(t){var e=1==t,c=2==t,d=3==t,l=4==t,u=6==t,b=7==t,p=5==t||u;return function(f,h,g,v){for(var O,j,m=r(f),y=a(m),N=o(h,g,3),V=n(y.length),x=0,k=v||i,S=e?k(f,V):c||b?k(f,0):void 0;V>x;x++)if((p||x in y)&&(O=y[x],j=N(O,x,m),t))if(e)S[x]=j;else if(j)switch(t){case 3:return!0;case 5:return O;case 6:return x;case 2:s.call(S,O)}else switch(t){case 4:return!1;case 7:s.call(S,O)}return u?-1:d||l?l:S}};t.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterOut:d(7)}},b789:function(t,e,c){"use strict";c.r(e);c("caad"),c("2532");var o=c("7a23"),a={class:"carts container py-5"},r={key:0,class:"row"},n={key:0,class:"col-md-10 mx-auto"},i=Object(o["createVNode"])("ol",{class:"row progress-bar list-unstyled justify-content-between text-center"},[Object(o["createVNode"])("li",{class:"col-4 active"},"確認購物車品項"),Object(o["createVNode"])("li",{class:"col-4"},"填寫資料"),Object(o["createVNode"])("li",{class:"col-4"},"確認訂單並付款")],-1),s={key:1,class:"accordion accordion-flush",id:"accordionFlushExample"},d={class:"accordion-item"},l={class:"accordion-header bg-light",id:"flush-headingCoupon"},u={class:"accordion-button collapsed bg-transparent shadow-none",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseCoupon","aria-expanded":"false","aria-controls":"flush-collapseCoupon"},b=Object(o["createTextVNode"])(" 可使用的優惠券 "),p={class:"ms-1 badge bg-primary"},f={id:"flush-collapseCoupon",class:"accordion-collapse collapse bg-light border-top","aria-labelledby":"flush-headingOne","data-bs-parent":"#accordionFlushExample"},h={class:"accordion-body"},g={class:"row list-unstyled"},v={class:"coupon-code fs-4 d-md-flex rounded-3 shadow-sm px-md-2 mb-3 mx-auto"},O={class:"coupon-name mb-0"},j={class:"bg-primary text-light fs-6 p-1"},m=Object(o["createTextVNode"])(" 商品"),y=Object(o["createVNode"])("br",{class:"d-none d-md-inline-block"},null,-1),N={key:0},V={key:1},x={key:2},k={key:3},S=Object(o["createVNode"])("i",{class:"bi bi-clipboard"},null,-1),C={class:"cart justify-content-center py-5"},w={class:"d-flex justify-content-between align-items-center"},B=Object(o["createVNode"])("h1",{class:"fs-4 text-primary mb-0"},[Object(o["createVNode"])("i",{class:"bi bi-cart-fill"}),Object(o["createTextVNode"])(" 購物車 ")],-1),$={key:0,class:"spinner-border spinner-border-sm",role:"status"},M=Object(o["createVNode"])("span",{class:"visually-hidden"},"Loading...",-1),E=Object(o["createVNode"])("small",null,[Object(o["createVNode"])("i",{class:"bi bi-trash2"}),Object(o["createTextVNode"])(" 刪除全部商品 ")],-1),F={key:0,class:"text-muted"},L={class:"bg-light shadow-sm p-3 p-md-5 mt-3 mb-5"},P={key:0,class:"table-responsive rounded-1"},D={class:"table table-borderless table-hover"},I=Object(o["createVNode"])("thead",{class:"rounded-3"},[Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th",{scope:"col",width:"5%"}),Object(o["createVNode"])("th",{scope:"col",width:"40%"},"品項"),Object(o["createVNode"])("th",{scope:"col",class:"text-end"},"數量"),Object(o["createVNode"])("th",{scope:"col",class:"text-end"},"價錢")])],-1),T={key:0,class:"spinner-border spinner-border-sm",role:"status"},_=Object(o["createVNode"])("span",{class:"visually-hidden"},"Loading...",-1),R=Object(o["createVNode"])("i",{class:"bi bi-trash-fill"},null,-1),z={class:"d-flex"},A={class:"mb-1"},J={key:0,class:"text-primary bg-info rounded-pill badge py-1 px-2"},G=Object(o["createVNode"])("i",{class:"bi bi-tag-fill"},null,-1),U={class:"input-group input-group-sm justify-content-end"},q={class:"input-group-text border-0 d-none d-md-block mb-0"},Q={class:"text-end"},K={class:"text-muted small"},W=Object(o["createVNode"])("br",null,null,-1),H=Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("td",{colspan:"3",class:"text-end border-0"},"運費"),Object(o["createVNode"])("td",{class:"text-end border-0"},"$0")],-1),X=Object(o["createVNode"])("td",{colspan:"3",class:"text-end"},"合計",-1),Y={class:"text-end text-nowrap fs-5"},Z={key:0,class:"text-primary fw-bold"},tt=Object(o["createVNode"])("td",{colspan:"3",class:"text-end"},"折扣後合計",-1),et={class:"text-end text-nowrap fs-5"},ct={key:1,class:"text-center"},ot=Object(o["createVNode"])("i",{class:"bi bi-cart4 display-1 fw-bold text-primary"},null,-1),at=Object(o["createVNode"])("p",{class:"bg-light text-primary fs-4 p-3"},"購物車目前無商品，歡迎選購",-1),rt=Object(o["createTextVNode"])("前往逛逛！"),nt={key:1,class:"d-block d-md-flex justify-content-between align-items-center text-end mb-5"},it={class:"coupon input-group input-group-sm me-5 mb-3 mb-md-0"},st={class:"input-group-append"},dt={key:0,class:"spinner-border spinner-border-sm",role:"status"},lt=Object(o["createVNode"])("span",{class:"visually-hidden"},"Loading...",-1),ut=Object(o["createTextVNode"])(" 套用優惠碼 "),bt=Object(o["createTextVNode"])(" 前往結帳 "),pt=Object(o["createVNode"])("i",{class:"bi bi-caret-right-fill"},null,-1),ft=Object(o["createStaticVNode"])('<h3 class="title text-primary fs-4 mb-2"><i class="bi bi-megaphone-fill"></i> 重要提醒 </h3><div class="border rounded-3"><ul class="card-body mb-0"><li> 付款方式限 <span class="fw-bold">信用卡</span> 付款。 </li><li> 大部分商品體積較大，因此不適用超商取貨，只提供 <span class="fw-bold">宅配到府</span>。 </li><li> 無庫存商品調貨時間請參考「商品平均調貨時間」。 </li><li> 目前無提供海外服務。 </li></ul></div>',2),ht={key:0,class:"container mb-5"},gt={class:"product-also-buy border-info rounded-3 px-3"},vt=Object(o["createVNode"])("h3",{class:"title text-primary fs-4 mb-4"},[Object(o["createVNode"])("i",{class:"bi bi-star-fill"}),Object(o["createTextVNode"])(" 你可能會喜歡... ")],-1),Ot={class:"row"},jt={class:"overflow-hidden position-relative"},mt={class:"ratio ratio-3x4"},yt={class:"btn-group position-absolute"},Nt={key:0,class:"spinner-border spinner-border-sm",role:"status"},Vt=Object(o["createVNode"])("span",{class:"visually-hidden"},"Loading...",-1),xt=Object(o["createTextVNode"])(" 加到購物車 "),kt={class:"card-body"},St={class:"d-flex align-items-center justify-content-between"},Ct={class:"card-title fs-5 mb-0"},wt={class:"fw-bold card-text text-muted"};function Bt(t,e,c,Bt,$t,Mt){var Et=Object(o["resolveComponent"])("Loading"),Ft=Object(o["resolveComponent"])("router-link");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(Et,{active:$t.isLoading,"z-index":100,loader:"dots",color:"#384D48"},null,8,["active"]),Object(o["createVNode"])("div",a,[$t.carts.carts?(Object(o["openBlock"])(),Object(o["createBlock"])("div",r,[$t.carts.carts.length?(Object(o["openBlock"])(),Object(o["createBlock"])("div",n,[i])):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0),$t.couponsGot.length?(Object(o["openBlock"])(),Object(o["createBlock"])("div",s,[Object(o["createVNode"])("div",d,[Object(o["createVNode"])("h2",l,[Object(o["createVNode"])("button",u,[b,Object(o["createVNode"])("span",p,Object(o["toDisplayString"])($t.couponsGot.length),1)])]),Object(o["createVNode"])("div",f,[Object(o["createVNode"])("div",h,[Object(o["createVNode"])("ul",g,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])($t.couponsGot,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])("li",{class:"col-md-6 col-xl-3",key:t},[Object(o["createVNode"])("div",v,[Object(o["createVNode"])("div",O,[Object(o["createVNode"])("div",j,[m,y,"firstPrize50"===t?(Object(o["openBlock"])(),Object(o["createBlock"])("span",N," 5 折")):"secondPrize60"===t?(Object(o["openBlock"])(),Object(o["createBlock"])("span",V," 6 折")):"thirdPrize70"===t?(Object(o["openBlock"])(),Object(o["createBlock"])("span",x," 7 折")):"fourthPrize80"===t?(Object(o["openBlock"])(),Object(o["createBlock"])("span",k," 8 折")):Object(o["createCommentVNode"])("",!0)])]),Object(o["createVNode"])("code",{class:"text-center text-primary px-2 mb-0",ref:t},Object(o["toDisplayString"])(t),513),Object(o["createVNode"])("button",{type:"button",class:"btn btn-link",title:"點擊複製",onClick:function(e){return Mt.copyCouponCode(t)}},[S],8,["onClick"])])])})),128))])])])])])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("div",C,[$t.carts.carts?(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[Object(o["createVNode"])("div",w,[B,$t.carts.carts.length?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-danger",onClick:e[1]||(e[1]=function(){return Mt.removeCarts&&Mt.removeCarts.apply(Mt,arguments)}),disabled:"deleteAll"===$t.loadingStatus.loadingRemoveCart},["deleteAll"===$t.loadingStatus.loadingRemoveCart?(Object(o["openBlock"])(),Object(o["createBlock"])("div",$,[M])):Object(o["createCommentVNode"])("",!0),E],8,["disabled"])):Object(o["createCommentVNode"])("",!0)]),$t.carts.carts.length?(Object(o["openBlock"])(),Object(o["createBlock"])("small",F,"總計 "+Object(o["toDisplayString"])($t.carts.carts.length)+" 項商品",1)):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("div",L,[$t.carts.carts.length?(Object(o["openBlock"])(),Object(o["createBlock"])("div",P,[Object(o["createVNode"])("table",D,[I,Object(o["createVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])($t.carts.carts,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:e.id},[Object(o["createVNode"])("td",null,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-danger border-0 rounded-circle",onClick:function(t){return Mt.removeCartItem(e.id)},disabled:$t.loadingStatus.loadingRemoveCart===e.id},[$t.loadingStatus.loadingRemoveCart===e.id?(Object(o["openBlock"])(),Object(o["createBlock"])("div",T,[_])):Object(o["createCommentVNode"])("",!0),R],8,["onClick","disabled"])]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",z,[Object(o["createVNode"])("img",{src:e.product.imageUrl,alt:e.product.title,class:"img-fluid img-size me-3 d-none d-sm-block"},null,8,["src","alt"]),Object(o["createVNode"])("div",null,[Object(o["createVNode"])("p",A,Object(o["toDisplayString"])(e.product.title),1),e.coupon?(Object(o["openBlock"])(),Object(o["createBlock"])("small",J,[G,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.coupon.code),1)])):Object(o["createCommentVNode"])("",!0)])])]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",U,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"number",class:"form-control border-0 count","onUpdate:modelValue":function(t){return e.qty=t},min:"1",onChange:function(t){return Mt.updateCart(e.id,e.product_id,e.qty)},disabled:$t.loadingStatus.updateCart===e.id},null,40,["onUpdate:modelValue","onChange","disabled"]),[[o["vModelText"],e.qty,void 0,{number:!0}]]),Object(o["createVNode"])("p",q,Object(o["toDisplayString"])(e.product.unit),1)])]),Object(o["createVNode"])("td",Q,[e.final_total!==e.total?(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[Object(o["createVNode"])("del",K,Object(o["toDisplayString"])(t.$filters.currency(e.total)),1),W],64)):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("span",{class:{"text-primary fw-bold":e.final_total!==e.total}}," $"+Object(o["toDisplayString"])(t.$filters.currency(e.final_total)),3)])])})),128))]),Object(o["createVNode"])("tfoot",null,[H,Object(o["createVNode"])("tr",null,[X,Object(o["createVNode"])("td",Y," NT$ "+Object(o["toDisplayString"])(t.$filters.currency($t.carts.total)),1)]),$t.carts.final_total!==$t.carts.total?(Object(o["openBlock"])(),Object(o["createBlock"])("tr",Z,[tt,Object(o["createVNode"])("td",et," NT$ "+Object(o["toDisplayString"])(t.$filters.currency($t.carts.final_total)),1)])):Object(o["createCommentVNode"])("",!0)])])])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",ct,[ot,at,Object(o["createVNode"])(Ft,{to:"/products",class:"btn btn-primary btn-lg mb-5"},{default:Object(o["withCtx"])((function(){return[rt]})),_:1})]))]),$t.carts.carts.length?(Object(o["openBlock"])(),Object(o["createBlock"])("div",nt,[Object(o["createVNode"])("div",it,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=function(t){return $t.coupon_code=t}),placeholder:"請輸入優惠碼"},null,512),[[o["vModelText"],$t.coupon_code]]),Object(o["createVNode"])("div",st,[Object(o["createVNode"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[3]||(e[3]=function(){return Mt.useCoupon&&Mt.useCoupon.apply(Mt,arguments)}),disabled:!$t.coupon_code},[$t.loadingStatus.loadingCoupon===$t.coupon_code&&""!==$t.coupon_code?(Object(o["openBlock"])(),Object(o["createBlock"])("div",dt,[lt])):Object(o["createCommentVNode"])("",!0),ut],8,["disabled"])])]),Object(o["createVNode"])(Ft,{to:"/cartinfo",class:"btn btn-primary flex-shrink-0"},{default:Object(o["withCtx"])((function(){return[bt,pt]})),_:1})])):Object(o["createCommentVNode"])("",!0),ft],64)):Object(o["createCommentVNode"])("",!0)])]),$t.randomProducts.length?(Object(o["openBlock"])(),Object(o["createBlock"])("div",ht,[Object(o["createVNode"])("div",gt,[vt,Object(o["createVNode"])("ul",Ot,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])($t.randomProducts,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("li",{class:"card col-md-4 col-lg-3 col-xl-2 border-0",key:e.id},[Object(o["createVNode"])("div",jt,[Object(o["createVNode"])("button",{type:"button",onClick:Object(o["withModifiers"])((function(t){return Mt.toggleFavorite(e)}),["stop"]),class:"btn btn-favorite position-absolute"},[Object(o["createVNode"])("i",{class:["bi",$t.myFavorite.includes(e.id)?"bi-heart-fill":"bi-heart"]},null,2)],8,["onClick"]),Object(o["createVNode"])("div",mt,[Object(o["createVNode"])("img",{src:e.imageUrl,alt:e.title,class:"cart-img card-img-top"},null,8,["src","alt"])]),Object(o["createVNode"])("div",yt,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-primary btn-cart",onClick:Object(o["withModifiers"])((function(t){return Mt.addCart(e.id,1)}),["stop"]),disabled:$t.loadingStatus.loadingCart===e.id},[$t.loadingStatus.loadingCart===e.id?(Object(o["openBlock"])(),Object(o["createBlock"])("div",Nt,[Vt])):Object(o["createCommentVNode"])("",!0),xt],8,["onClick","disabled"])])]),Object(o["createVNode"])("div",kt,[Object(o["createVNode"])("div",St,[Object(o["createVNode"])("h4",Ct,[Object(o["createVNode"])("a",{href:"#",onClick:Object(o["withModifiers"])((function(t){return Mt.getProductInfo(e.id)}),["prevent"]),class:"text-dark d-block stretched-link"},Object(o["toDisplayString"])(e.title),9,["onClick"])])]),Object(o["createVNode"])("p",wt,"NT$ "+Object(o["toDisplayString"])(t.$filters.currency(e.price)),1)])])})),128))])])])):Object(o["createCommentVNode"])("",!0)],64)}c("a434"),c("99af"),c("4de4"),c("d3b7"),c("6062"),c("3ca3"),c("ddb0"),c("159b");var $t=c("eddb"),Mt={data:function(){return{products:{},carts:{},pagination:"",tempProduct:{},loadingStatus:{},coupon_code:"",isLoading:!1,randomProducts:[],myFavorite:$t["a"].getFavorite()||[],couponsGot:JSON.parse(localStorage.getItem("couponsGot"))||[]}},inject:["$httpMessageState","emitter"],methods:{addCart:function(t){var e=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o="/api/".concat("hsinyuuu","/cart"),a={product_id:t,qty:c};this.loadingStatus.loadingCart=t,this.$http.post(o,{data:a}).then((function(c){c.data.success?(e.getCart(),e.emitter.emit("update-cart",t),e.loadingStatus.loadingCart="",e.$httpMessageState(c,"加入購物車")):e.$httpMessageState(c,"加入購物車")})).catch((function(t){e.$httpMessageState(t,"連線錯誤")}))},getCart:function(){var t=this;this.isLoading=!0;var e="/api/".concat("hsinyuuu","/cart");this.$http.get(e).then((function(e){if(!e.data.success)return t.$httpMessageState(e,"取得購物車列表"),void(t.isLoading=!1);t.carts=e.data.data,t.isLoading=!1})).catch((function(e){t.$httpMessageState(e,"連線錯誤"),t.isLoading=!1}))},getProductInfo:function(t){this.$router.push("/product/".concat(t)),this.getProduct(t),this.saveProductViewed(t)},saveProductViewed:function(t){var e=6,c=JSON.parse(localStorage.getItem("productsViewed"))||[];c.includes(t)&&c.splice(c.indexOf(t),1),c.unshift(t),c.length>e&&c.pop(),localStorage.setItem("productsViewed",JSON.stringify(c))},getProduct:function(t){var e=this;this.isLoading=!0;var c=t||this.$route.params.productId,o="/api/".concat("hsinyuuu","/product/").concat(c);this.$http.get(o).then((function(t){if(!t.data.success)return e.isLoading=!1,void e.$httpMessageState(t,"取得產品資料");e.product=t.data.product,e.getAllProducts(),e.isLoading=!1})).catch((function(t){e.$httpMessageState(t,"連線錯誤"),e.isLoading=!1}))},updateCart:function(t,e,c){var o=this;this.isLoading=!0;var a="/api/".concat("hsinyuuu","/cart/").concat(t),r={product_id:e,qty:c};this.loadingStatus.updateCart=t,this.$http.put(a,{data:r}).then((function(t){if(!t.data.success)return o.$httpMessageState(t,"更新購物車"),void(o.isLoading=!1);o.getCart(),o.loadingStatus.updateCart="",o.$httpMessageState(t,"更新購物車"),o.isLoading=!1})).catch((function(t){o.$httpMessageState(t,"連線錯誤"),o.isLoading=!1}))},removeCartItem:function(t){var e=this,c="/api/".concat("hsinyuuu","/cart/").concat(t);this.loadingStatus.loadingRemoveCart=t,this.$http.delete(c).then((function(c){c.data.success?(e.getCart(),e.emitter.emit("update-cart",t),e.loadingStatus.loadingRemoveCart="",e.$httpMessageState(c,"移除購物車")):e.$httpMessageState(c,"移除購物車")})).catch((function(t){e.$httpMessageState(t,"連線錯誤")}))},removeCarts:function(){var t=this,e="/api/".concat("hsinyuuu","/carts");this.loadingStatus.loadingRemoveCart="deleteAll",this.$http.delete(e).then((function(e){e.data.success?(t.getCart(),t.emitter.emit("update-cart"),t.loadingStatus.loadingRemoveCart="",t.$httpMessageState(e,"移除購物車")):t.$httpMessageState(e,"移除購物車")})).catch((function(e){t.$httpMessageState(e,"連線錯誤")}))},copyCouponCode:function(t){var e=this.$refs[t];window.getSelection().selectAllChildren(e),document.execCommand("Copy"),this.$httpMessageState({data:{success:!0,message:"已複製優惠碼： ".concat(t)}},"複製優惠券")},useCoupon:function(){var t=this,e="/api/".concat("hsinyuuu","/coupon"),c={code:this.coupon_code};this.loadingStatus.loadingCoupon=this.coupon_code,this.$http.post(e,{data:c}).then((function(e){if(e.data.success)t.getCart(),t.loadingStatus.loadingCoupon="",t.$httpMessageState(e,"套用優惠券");else{if(t.loadingStatus.loadingCoupon="",t.$httpMessageState(e,"套用優惠券"),"優惠券無法使用或已過期"===e.data.message){var c=JSON.parse(localStorage.getItem("couponsGot"));c=c.filter((function(e){return e!==t.coupon_code})),localStorage.setItem("couponsGot",JSON.stringify(c)),t.couponsGot=JSON.parse(localStorage.getItem("couponsGot"))}t.coupon_code=""}})).catch((function(e){t.$httpMessageState(e,"連線錯誤")}))},getAllProducts:function(){var t=this,e="/api/".concat("hsinyuuu","/products/all");this.$http.get(e).then((function(e){if(!e.data.success)return t.$httpMessageState(e,"取得全部產品資料"),void(t.isLoading=!1);t.products=e.data.products,t.getRandomProducts()})).catch((function(e){t.$httpMessageState(e,"連線錯誤"),t.isLoading=!1}))},getRandomProducts:function(){for(var t=this,e=new Set([]),c=this.products.length<4?this.products.length:4,o=0;e.size<c;o+=1){var a=this.$filters.randomInt(this.products.length);e.add(this.products[a])}this.randomProducts=[],e.forEach((function(e){t.randomProducts.push(e)}))},toggleFavorite:function(t){this.myFavorite.includes(t.id)?(this.myFavorite.splice(this.myFavorite.indexOf(t.id),1),this.$httpMessageState({data:{success:!0,message:"已將 ".concat(t.title," 移除收藏")}},"移除收藏")):(this.myFavorite.push(t.id),this.$httpMessageState({data:{success:!0,message:"已將 ".concat(t.title," 加入收藏")}},"加入收藏")),$t["a"].storeFavorite(this.myFavorite),this.emitter.emit("update-favorite")},updateFavorite:function(){this.myFavorite=$t["a"].getFavorite(),this.getProduct()}},mounted:function(){this.$http.defaults.baseURL="https://vue3-course-api.hexschool.io",this.getCart(),this.getAllProducts()}},Et=c("6b0d"),Ft=c.n(Et);const Lt=Ft()(Mt,[["render",Bt]]);e["default"]=Lt},bb2f:function(t,e,c){var o=c("d039");t.exports=!o((function(){return Object.isExtensible(Object.preventExtensions({}))}))},caad:function(t,e,c){"use strict";var o=c("23e7"),a=c("4d64").includes,r=c("44d2");o({target:"Array",proto:!0},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),r("includes")},e8b5:function(t,e,c){var o=c("c6b6");t.exports=Array.isArray||function(t){return"Array"==o(t)}},eddb:function(t,e,c){"use strict";e["a"]={storeFavorite:function(t){var e=JSON.stringify(t);localStorage.setItem("favoriteProduct",e)},getFavorite:function(){return JSON.parse(localStorage.getItem("favoriteProduct"))}}},f183:function(t,e,c){var o=c("d012"),a=c("861d"),r=c("5135"),n=c("9bf2").f,i=c("90e3"),s=c("bb2f"),d=i("meta"),l=0,u=Object.isExtensible||function(){return!0},b=function(t){n(t,d,{value:{objectID:"O"+ ++l,weakData:{}}})},p=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,d)){if(!u(t))return"F";if(!e)return"E";b(t)}return t[d].objectID},f=function(t,e){if(!r(t,d)){if(!u(t))return!0;if(!e)return!1;b(t)}return t[d].weakData},h=function(t){return s&&g.REQUIRED&&u(t)&&!r(t,d)&&b(t),t},g=t.exports={REQUIRED:!1,fastKey:p,getWeakData:f,onFreeze:h};o[d]=!0}}]);
//# sourceMappingURL=chunk-cea6269a.ec8b3a55.js.map